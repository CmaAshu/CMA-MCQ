<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Quiz - Cost and Management Audit (Paper 17)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        #scoreboard-container {
            background: #9370DB; /* Purple */
            color: #ffffff; 
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 800px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        #set-navigation-container {
            background: #4169E1; /* Royal Blue */
            color: #ffffff; 
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 800px;
            margin-bottom: 15px;
            text-align: center;
        }

        #scoreboard {
            display: flex;
            justify-content: space-around;
            font-size: 0.95em;
            font-weight: 500;
        }

        #scoreboard span {
            margin: 0 10px;
        }
        #scoreboard .correct { color: #d4edda; } 
        #scoreboard .incorrect { color: #f8d7da; } 
        #scoreboard .accuracy { color: #e0e0e0; } 


        #set-navigation-container label {
            margin-right: 10px;
            font-weight: 500;
            color: #ffffff; 
        }

        #set-selector {
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #ced4da;
            font-size: 1em;
            background-color: #fff; 
            color: #333; 
        }

        #quiz-container {
            background: #FFDAB9; /* Light Saffron (PeachPuff) */
            padding: 25px 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 800px;
            margin-bottom: 20px;
            color: #333; 
        }

        #question-header {
            font-size: 0.9em;
            color: #4A4A4A; 
            margin-bottom: 15px;
            text-align: right;
            border-bottom: 1px solid #FFBFA0; 
            padding-bottom: 10px;
        }

        #question-text {
            font-size: 1.15em;
            margin-bottom: 25px;
            color: #2c3e50; 
            font-weight: 500;
        }

        .options-container {
            margin-bottom: 20px;
        }

        .option {
            display: flex;
            align-items: center;
            background: #FFF8E1; 
            padding: 12px 15px;
            margin-bottom: 12px;
            border-radius: 6px;
            cursor: pointer;
            border: 1px solid #FFECB3; 
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
            color: #333; 
        }

        .option:not(.disabled):hover {
            background: #FFF0C1; 
            border-color: #FFE082;
        }
        
        .option.correct-answer {
            background: #d4edda !important; 
            border-color: #c3e6cb !important;
            color: #155724 !important;
        }

        .option.incorrect-selection {
            background: #f8d7da !important; 
            border-color: #f5c6cb !important;
            color: #721c24 !important;
        }
        .option.user-selected-display { 
            /* Styles to indicate this was the user's picked option when reviewing */
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-letter {
            font-weight: bold;
            margin-right: 10px;
            color: #495057;
            background-color: #FFECB3; 
            padding: 3px 7px;
            border-radius: 4px;
            min-width: 20px;
            text-align: center;
        }
        
        .option.correct-answer .option-letter {
            background-color: #28a745 !important;
            color: white !important;
        }
        .option.incorrect-selection .option-letter {
            background-color: #dc3545 !important;
            color: white !important;
        }

        #navigation-buttons {
            display: flex;
            justify-content: space-between; 
            margin-top: 25px;
        }

        button {
            background-color: #007bff; 
            color: white;
            border: none;
            padding: 12px 25px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        #prev-btn {
            background-color: #6c757d; 
        }
       
        #prev-btn:disabled, #next-btn:disabled {
             background-color: #cccccc;
            cursor: not-allowed;
        }

        button:hover:not(:disabled) {
            background-color: #0056b3;
        }
         #prev-btn:hover:not(:disabled) {
            background-color: #5a6268;
        }


        #completion-message {
            text-align: center;
            font-size: 1.6em;
            color: #28a745;
            padding: 30px;
            border: 1px solid #c3e6cb;
            background-color: #d4edda;
            border-radius: 8px;
        }
        #instagram-link {
            margin-top: 30px;
            text-align: center;
            font-size: 1.1em;
            color: #555;
        }
        #instagram-link a {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }
        #instagram-link a:hover {
            text-decoration: underline;
        }

        @media (max-width: 600px) {
            #scoreboard-container,
            #set-navigation-container, 
            #quiz-container {
                padding: 15px;
            }
            #scoreboard {
                flex-direction: column;
                align-items: center;
            }
            #scoreboard span {
                margin: 3px 0;
            }
            #question-text {
                font-size: 1.05em;
            }
            .option {
                padding: 10px;
            }
            button {
                padding: 10px 15px; 
                font-size: 14px;
            }
            #set-selector {
                width: 100%;
                margin-top: 5px;
            }
            #set-navigation-container label {
                display: block;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div id="scoreboard-container">
        <div id="scoreboard">
            <span id="correct-count">Correct: 0</span>
            <span id="incorrect-count">Incorrect: 0</span>
            <span id="attempted-count">Attempted: 0</span>
            <span id="accuracy-rate">Accuracy: N/A</span>
        </div>
    </div>

    <div id="set-navigation-container">
        <label for="set-selector">Switch to Set:</label>
        <select id="set-selector"></select>
    </div>

    <div id="quiz-container">
        <div id="question-header">Loading quiz...</div>
        <div id="question-text"></div>
        <div class="options-container" id="options-container">
            </div>
        <div id="navigation-buttons">
            <button id="prev-btn">Previous Question</button>
            <button id="next-btn">Next Question</button>
        </div>
        <div id="completion-message" style="display:none;">
            Quiz Completed! Thank you for participating.
        </div>
    </div>

    <div id="instagram-link">
        Follow on Instagram: <a href="https://www.instagram.com/ashu.ig?igsh=ams5eWxhd2NuNGs4" target="_blank">AshðŸ”±tosh</a>
    </div>

    <script>
        const questionsData = [
            { q: "Cost Audit was first introduced in the year", o: ["1959", "1965", "1949", "1975"], c: "1965" },
            { q: "Cost Audit was first introduced for industry", o: ["Cement", "Iron & Steel", "Jute", "Sugar"], c: "Cement" },
            { q: "Govt. of India has issued order with respect to introduction of mandatory Cost Audit of Cost Records maintained by the Companies in the year", o: ["2008", "2009", "2011", "2014"], c: "2011" },
            { q: "The report on the audit of cost records is submitted by the cost auditor to", o: ["Managing Director", "Finance Director", "Audit Committee", "Board of Directors"], c: "Board of Directors" },
            { q: "The cost auditor of the company who is in default in compliance with section 148 shall be punishable in the manner as provided in", o: ["Section 139 of Companies Act, 2013", "sub-sections (1) to (3) of section 148 of Companies Act, 2013", "Section 143 of Companies Act, 2013", "sub-sections (2) to (5) of section 147 of Companies Act, 2013"], c: "sub-sections (2) to (5) of section 147 of Companies Act, 2013" },
            { q: "Cost Audit represents true and fair view of the of any product.", o: ["Cost of sale", "Cost of raw material consumption", "Cost of production", "None of these"], c: "Cost of production" },
            { q: "Cost Audit conducted by a Chartered Accountant", o: ["May be", "Can be", "Cannot be", "May not be"], c: "Cannot be" },
            { q: "Which of the following are the objectives for which cost audit is undertaken?", o: ["To establish the accuracy of costing data.", "To ensure that cost accounting principles are governed by the management objectives and these are strictly adhered in preparing cost accounts.", "To reduce the amount of detailed checking by the external auditor if effective internal cost audit system is in operation.", "All of the above"], c: "All of the above" },
            { q: "The applicability of cost audit under Companies (Cost Records & Audit) Rules, 2014 for regulated industries having overall annual turnover during immediate preceding financial year is", o: ["25.00 crores or more", "35.00 crores", "50.00 crores or more", "100.00 crores"], c: "50.00 crores or more" },
            { q: "The Company has to upload CRA-4 electronically to the MCA under the rule of Companies (Cost Records & Audit) Rules, 2014", o: ["Rule 5 (1)", "Rule 6 (2)", "Rule 4 (6)", "Rule 6 (6)"], c: "Rule 6 (6)" },
            { q: "The form in which the cost records shall be maintained", o: ["CRA-1", "CRA-2", "CRA-3", "CRA-4"], c: "CRA-1" },
            { q: "Which of the following type of Electricity Company is under the purview of regulated sector?", o: ["Engaged in Generation", "Engaged in Transmission", "Engaged in Distribution & Supply", "All the above"], c: "All the above" },
            { q: "Which one of the below is not a regulated industry?", o: ["Telecommunication", "Electricity", "Drugs & Pharmaceuticals", "Automobile"], c: "Automobile" },
            { q: "Any casual vacancy in the office of a cost auditor, whether due to resignation, death or removal to be filled by the Board of Directors within days of occurrence of such vacancy.", o: ["30 days", "60 days", "90 days", "7 days"], c: "30 days" },
            { q: "Machinery used in defense, space and atomic energy sector and fulfilling turnover criteria is under", o: ["regulated sector", "unregulated sector", "exempted by different statute", "not applicable category"], c: "unregulated sector" },
            { q: "The Institute of Cost and Works Accountants of India (ICWAI) was renamed as \"The Institute of Cost Accountants of India\" in the year", o: ["2012", "2010", "2008", "2015"], c: "2012" },
            { q: "For regulated sector cost audit requirement has been made subject to a turnover based threshold", o: ["25 Crores", "50 Crores", "35 Crores", "100 Crores"], c: "50 Crores" },
            { q: "A company, engaged in construction business, is covered under the Companies (Cost Records and Audit) Rules, 2014 but does not include", o: ["outsourcing by a sub-contracting company", "a company working on BOT (Build, Operate, Transfer) mode", "a company working in a Special Economic Zone", "a project undertaken as EPC (Eng.. Procurement, Constn.) contract"], c: "a company working in a Special Economic Zone" },
            { q: "As per Part D. Para 4 of the Companies (Cost Records and Audit) Rules, 2014, Value Addition and Distribution of Earnings are to be computed based on", o: ["Audited Financial Data", "Cost Record Data", "Unaudited Financial Data", "Both (A) and (B)"], c: "Audited Financial Data" },
            { q: "CCRA-Rules, 2014 is applicable from the financial year commencing on or after", o: ["01.01.2014", "01.04.2014", "01.07.2014", "01.04.2015"], c: "01.04.2014" },
            { q: "The Cost Auditor appointed has to render the cost audit report to the board of directors of the Company, as per the specified time limit, in Form", o: ["CRA-3", "CRA-1", "XBRL", "CRA-2"], c: "CRA-3" },
            { q: "The cost records are to be maintained as specified in:", o: ["CRA3", "CRA1", "CRA 4", "CRA 2"], c: "CRA1" },
            { q: "'Sugar and Industrial Alcohol' belong to sector for the purpose of Application of Cost Records.", o: ["Regulated", "Non-Regulated", "Both depending on circumstances", "None of above"], c: "Regulated" },
            { q: "The Central Govt. released the CCRA - Rules, 2014 in pursuance to the powers vested with it U/s of the Companies Act, 2013", o: ["Section 469", "Section 148", "Section 465", "Section 469 and 148"], c: "Section 469 and 148" },
            { q: "The CCRA-Rules, 2014 supersedes", o: ["Companies (Cost Accounting Records) Rules, 2011", "Companies (Cost Audit Report) Rules, 2011", "Cost Accounting Records (Telecommunication Industry) Rules, 2011", "All the above"], c: "All the above" },
            { q: "The provisions related to maintenance of cost records were introduced in the year by amendment to the Companies Act, 1956.", o: ["1960", "1965", "1966", "1970"], c: "1965" },
            { q: "The CCRA - Rules, 2014 is not applicable to", o: ["MSME", "Export oriented unit", "Private limited companies", "Units operating from SEZ"], c: "MSME" },
            { q: "The cost audit report under CCRA- Rules, 2014 is to be submitted in", o: ["Form-3", "Form-4", "Form-1", "Form-2"], c: "Form-3" },
            { q: "Which one of the below is not a regulated industry", o: ["Fertilizers", "Aluminium", "Sugar", "Petroleum products"], c: "Aluminium" },
            { q: "As per the CAS 23, the activity of Overburden Removal that benefits the identified component of an ore to be mined by the entity is called as ......", o: ["Mining Activity", "Overburden Remova", "Stripping Activity", "Advance Stripping"], c: "Stripping Activity" },
            { q: "Cost Information the organization to structure the cost, understand it and use it for communicating with the stakeholders.", o: ["Enables", "Disables", "Useful", "None of these"], c: "Enables" },
            { q: "The appointment of Cost Auditor is defined under section of the Companies Act, 2013.", o: ["Section 148(2)", "Section 148(3)", "Section 144(3)", "Section 139"], c: "Section 148(3)" },
            { q: "A cost accountant who fails comply with the provisions of sub-section (12) of Sec. 143 of the Companies Act, 2013, shall be punishable with fine of maximum", o: ["5.00 lakhs", "25.00 lakhs", "1.00 lakhs", "10.00 lakhs"], c: "25.00 lakhs" },
            { q: "Cost auditor to report fraud under section of Companies Act, 2013.", o: ["Section 140(12)", "Section 148(2)", "Section 144(10)", "Section 143(12)"], c: "Section 143(12)" },
            { q: "Any casual vacancy in the office of a cost auditor, shall be filled by the Board of Directors within days of occurrence of such vacancy.", o: ["180", "90", "30", "60"], c: "30" },
            { q: "Which one of the following is not a professional misconduct in relation to Cost Accountants in Practice as per the Second Schedule of The CWA Act, 1959?", o: ["He/she fails to invite attention to any material departure from the generally accepted procedure of costing and pricing applicable to the circumstances", "He/she does not exercise due diligence or is grossly negligent in the conduct of his/her professional duties", "He/she fails to report a material misstatement known to him/her to appear in a cost or pricing statement with which he/she is concerned in a professional capacit", "In the opinion of the Council, he/she brings disrepute to the Profession or the Institute as a result of his/her action whether or not related to his/her professional work"], c: "In the opinion of the Council, he/she brings disrepute to the Profession or the Institute as a result of his/her action whether or not related to his/her professional work" },
            { q: "Which of the following is not a Professional Misconduct as per the First Schedule of The CWA Act, 1959, in relation to the Cost Accountants in Practice?", o: ["Pays or allows or agrees to pay or allow, directly or indirectly, any share, commission or brokerage in the fees or profits of his/her professional work, to any person other than a member of the Institute or a partner or a retired partner or the legal representative of a deceased partner", "Enters into a partnership, in or outside India, with any person other than a Cost Accountant in Practice or such other person who is a member of any other professional body having such qualifications as may be prescribed", "Advertises his/her professional attainments or services or uses any designation or expression other than Cost Accountant on professional documents, visiting cards, letter heads or sign boards, unless it is a degree of a University established by law in India or recognised by the Central Government or a title indicating membership of The ICAI or any other institution that has been recognised by the Central Government or may be recognised by the Council", "Expresses his/her opinion on cost or pricing statements of any business or enterprise in which, $he/she$ his/her firm or a partner in his/her firm has substantial interest"], c: "Expresses his/her opinion on cost or pricing statements of any business or enterprise in which, $he/she$ his/her firm or a partner in his/her firm has substantial interest" },
            { q: "The cost auditor to be appointed within days of the beginning of the financial year", o: ["90 days", "180 days", "6 months", "270 days"], c: "180 days" },
            { q: "Relatives of any partner of the firm holding any security of or interest in the company of face value exceeding lakh can not be appointed as the Cost Auditor of that company.", o: ["One", "Two", "Three", "None of the above"], c: "One" },
            { q: "Cost audit is to be conducted by a cost auditor who is a/an", o: ["Any indian resident", "Qualified Chartered accountant", "Qualified Company secretary", "Qualified cost and management accountant"], c: "Qualified cost and management accountant" },
            { q: "The cost auditor is for forming and expressing an opinion on the cost statements.", o: ["Responsible", "Reasonable", "Irresponsible", "Assessing"], c: "Responsible" },
            { q: "The cost auditing standards deal with the of the cost auditor.", o: ["Efficiency", "Effectiveness", "Qualifications", "Responsibility"], c: "Responsibility" },
            { q: "Which of the following persons shall NOT be appointed as cost auditor of a company:", o: ["A person who has been appointed as auditor of the company for the respective period", "A person who is, or at any time during the preceding three years was a director. officer or in the employment of a director", "Both A&B", "None"], c: "Both A&B" },
            { q: "Which of the following persons shall not be appointed as auditor of a company?", o: ["A person who has been appointed as auditor of the company", "A spouse of a director of the company", "A body corporate", "All of the above"], c: "All of the above" },
            { q: "Which of the following particulars relating to wages and salaries be included in Cost Auditor's Report to the Director of the company?", o: ["Total wages and salaries paid", "Total man-days of direct labour available and actually worked", "A brief explanation for variances in item", "All of the above"], c: "All of the above" },
            { q: "CAS-17 deals with", o: ["Royalty and Technical Knowhow fee", "Material Cost", "Research & Development Cost", "Interest & Financing charges"], c: "Interest & Financing charges" },
            { q: "CAS 21 deals with", o: ["Cost of service cost centre", "Quality Control", "Capacity determination", "Cost classification"], c: "Quality Control" },
            { q: "The foreign exchange component of imported material is converted at the rate on", o: ["Date of Payment", "Date of Delivery", "Date of Transaction", "Date of Use"], c: "Date of Transaction" },
            { q: "Which of the following is not forming part of Cost of transportation?", o: ["Cost of transport", "Transit insurance", "Demurrage Charge", "Local Octroi charges"], c: "Demurrage Charge" },
            { q: "Idle capacity is the difference between", o: ["Installed capacity and Actual Capacity Utilisation", "Installed capacity and Normal Capacity", "Abnormal Idle capacity and Normal Capacity", "Installed capacity and Normal Capacity"], c: "Installed capacity and Actual Capacity Utilisation" },
            { q: "Which of the following is not part of the Employee Cost as per CAS-7?", o: ["Leave with Pay", "Medical benefits to the Employees and dependents", "Compensation for Lay off period", "Cost of Employees' stock option"], c: "Compensation for Lay off period" },
            { q: "CAS 9 deals with", o: ["Direct Material Cost", "Indirect Material Cost", "Packing Material Cost", "Imported Material Cost"], c: "Packing Material Cost" },
            { q: "The Institute of Cost and Works Accountants of India (ICWAI) was renamed as \"The Institute of Cost Accountants of India\" in the year", o: ["2012", "2010", "2008", "2015"], c: "2012" },
            { q: "CAS-20 deals with", o: ["Royalty and Technical Knowhow fee", "Material Cost", "Research & Development Cost", "Financial Cost"], c: "Royalty and Technical Knowhow fee" },
            { q: "As per CAS 2 Actual Capacity utilization shall be presented as a percentage of capacity.", o: ["Installed Capacity", "Practical Capacity", "Abnormal Loss (%)", "Actual Production"], c: "Installed Capacity" },
            { q: "CAS 5 deals with", o: ["Equalized cost of transportation", "Captive consumption", "Capacity determination", "Cost classification"], c: "Equalized cost of transportation" }
        ];

        let userAnswers = new Array(questionsData.length).fill(null);
        let questionsAttemptedFlags = new Array(questionsData.length).fill(false);
        let currentQuestionIndex = 0;
        let score = { correct: 0, incorrect: 0 };

        const questionHeaderElement = document.getElementById('question-header');
        const questionTextElement = document.getElementById('question-text');
        const optionsContainerElement = document.getElementById('options-container');
        const nextButton = document.getElementById('next-btn');
        const prevButton = document.getElementById('prev-btn');
        const completionMessageElement = document.getElementById('completion-message');
        const setSelectorElement = document.getElementById('set-selector');

        const correctCountElement = document.getElementById('correct-count');
        const incorrectCountElement = document.getElementById('incorrect-count');
        const attemptedCountElement = document.getElementById('attempted-count');
        const accuracyRateElement = document.getElementById('accuracy-rate');
        
        const questionsPerSet = [50, 50, 69]; 
        const setStartIndices = [0, 50, 100]; 


        function populateSetSelector() {
            setSelectorElement.innerHTML = ''; // Clear existing options
            questionsPerSet.forEach((num, index) => {
                const option = document.createElement('option');
                option.value = index; 
                option.textContent = `Set ${index + 1} (Q ${setStartIndices[index] + 1} - ${setStartIndices[index] + num})`;
                setSelectorElement.appendChild(option);
            });
            setSelectorElement.addEventListener('change', (event) => {
                const selectedSetIndex = parseInt(event.target.value);
                currentQuestionIndex = setStartIndices[selectedSetIndex];
                displayQuizElements();
                loadQuestion();
            });
        }
        
        function displayQuizElements() {
            completionMessageElement.style.display = 'none';
            questionHeaderElement.style.display = 'block';
            questionTextElement.style.display = 'block';
            optionsContainerElement.style.display = 'block';
            document.getElementById('navigation-buttons').style.display = 'flex';
        }


        function getCurrentSetInfo(index) {
            let cumulativeQuestions = 0;
            for (let i = 0; i < questionsPerSet.length; i++) {
                cumulativeQuestions += questionsPerSet[i];
                if (index < cumulativeQuestions) {
                    if (setSelectorElement.value != i) { 
                         setSelectorElement.value = i;
                    }
                    return { setNumber: i + 1, totalSets: questionsPerSet.length };
                }
            }
            //This will handle the last set if the loop doesn't catch it
            const lastSetIndex = questionsPerSet.length - 1;
            if (setSelectorElement.value != lastSetIndex) {
                setSelectorElement.value = lastSetIndex;
            }
            return { setNumber: questionsPerSet.length, totalSets: questionsPerSet.length };
        }
        
        function updateScoreboard() {
            correctCountElement.textContent = `Correct: ${score.correct}`;
            incorrectCountElement.textContent = `Incorrect: ${score.incorrect}`;
            const attempted = score.correct + score.incorrect;
            attemptedCountElement.textContent = `Attempted: ${attempted}`;
            if (attempted > 0) {
                const accuracy = (score.correct / attempted * 100).toFixed(1);
                accuracyRateElement.textContent = `Accuracy: ${accuracy}%`;
            } else {
                accuracyRateElement.textContent = `Accuracy: N/A`;
            }
        }

        function loadQuestion() {
            if (currentQuestionIndex < 0) currentQuestionIndex = 0;
            if (currentQuestionIndex >= questionsData.length) {
                showCompletionMessage();
                return;
            }
            displayQuizElements(); 

            const currentQuestion = questionsData[currentQuestionIndex];
            const setInfo = getCurrentSetInfo(currentQuestionIndex);

            questionHeaderElement.textContent = `Question ${currentQuestionIndex + 1} of ${questionsData.length} (Set ${setInfo.setNumber} of ${setInfo.totalSets})`;
            questionTextElement.innerHTML = currentQuestion.q.replace(/____/g, '<span style="text-decoration: underline;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>');

            optionsContainerElement.innerHTML = '';
            const questionAlreadyAnswered = questionsAttemptedFlags[currentQuestionIndex];

            currentQuestion.o.forEach((optionText, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.dataset.optionText = optionText; 

                const optionLetter = String.fromCharCode(65 + index);
                optionElement.innerHTML = `<span class="option-letter">${optionLetter}</span> <span class="option-text">${optionText}</span>`;
                
                if (questionAlreadyAnswered) {
                    optionElement.classList.add('disabled');
                    if (optionText === currentQuestion.c) {
                        optionElement.classList.add('correct-answer');
                    }
                    if (optionText === userAnswers[currentQuestionIndex] && optionText !== currentQuestion.c) {
                        optionElement.classList.add('incorrect-selection');
                    }
                     if (optionText === userAnswers[currentQuestionIndex]) {
                        optionElement.classList.add('user-selected-display');
                    }
                } else {
                    optionElement.addEventListener('click', () => handleOptionSelection(optionElement, optionText));
                }
                optionsContainerElement.appendChild(optionElement);
            });
            
            prevButton.disabled = currentQuestionIndex === 0;
            // MODIFICATION: Always enable the next button to allow skipping
            nextButton.disabled = false; 
            
            if (currentQuestionIndex >= questionsData.length -1) {
                nextButton.textContent = "Show Results";
            } else {
                 nextButton.textContent = "Next Question";
            }
        }

        function handleOptionSelection(selectedDiv, selectedOptionText) {
            if (questionsAttemptedFlags[currentQuestionIndex]) return; 

            questionsAttemptedFlags[currentQuestionIndex] = true;
            userAnswers[currentQuestionIndex] = selectedOptionText;
            nextButton.disabled = false; 

            const currentQuestion = questionsData[currentQuestionIndex];
            const correctAnswerText = currentQuestion.c;

            selectedDiv.classList.add('user-selected-display');

            if (selectedOptionText === correctAnswerText) {
                selectedDiv.classList.add('correct-answer');
                score.correct++;
            } else {
                selectedDiv.classList.add('incorrect-selection');
                score.incorrect++;
                Array.from(optionsContainerElement.children).forEach(optDiv => {
                    if (optDiv.dataset.optionText === correctAnswerText) {
                        optDiv.classList.add('correct-answer');
                    }
                });
            }
            
            Array.from(optionsContainerElement.children).forEach(optDiv => {
                const newOptDiv = optDiv.cloneNode(true);
                optDiv.parentNode.replaceChild(newOptDiv, optDiv);
                newOptDiv.classList.add('disabled');
            });

            updateScoreboard();
             if (currentQuestionIndex >= questionsData.length -1) {
                nextButton.textContent = "Show Results";
            }
        }
        
        function selectOptionByKey(key) {
            if (questionsAttemptedFlags[currentQuestionIndex]) return;

            let optionIndex = -1;
            if (key === 'a' || key === '1') optionIndex = 0;
            else if (key === 'b' || key === '2') optionIndex = 1;
            else if (key === 'c' || key === '3') optionIndex = 2;
            else if (key === 'd' || key === '4') optionIndex = 3;

            if (optionIndex !== -1 && optionIndex < optionsContainerElement.children.length) {
                const optionDiv = optionsContainerElement.children[optionIndex];
                if (optionDiv && !optionDiv.classList.contains('disabled')) {
                    handleOptionSelection(optionDiv, optionDiv.dataset.optionText);
                }
            }
        }

        function nextQuestionHandler() {
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showCompletionMessage();
            }
        }

        function prevQuestionHandler() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }
        
        function showCompletionMessage() {
            questionHeaderElement.style.display = 'none';
            questionTextElement.style.display = 'none';
            optionsContainerElement.style.display = 'none';
            document.getElementById('navigation-buttons').style.display = 'none';
            completionMessageElement.style.display = 'block';
            const attempted = score.correct + score.incorrect;
            const accuracy = attempted > 0 ? (score.correct / attempted * 100).toFixed(1) : "0.0";
            completionMessageElement.innerHTML = `Quiz Completed! <br> Final Score: ${score.correct} Correct, ${score.incorrect} Incorrect. <br> Accuracy: ${accuracy}%`;
        }

        nextButton.addEventListener('click', nextQuestionHandler);
        prevButton.addEventListener('click', prevQuestionHandler);

        document.addEventListener('keydown', (event) => {
            const key = event.key.toLowerCase();
            
            // MODIFICATION: Allow skipping with keyboard shortcuts
            if (key === 'arrowright' || key === ' ' || key === 'enter') {
                event.preventDefault();
                nextQuestionHandler();
            } else if (key === 'arrowleft') {
                event.preventDefault();
                prevQuestionHandler();
            } else if (['a', 'b', 'c', 'd', '1', '2', '3', '4'].includes(key)) {
                if (currentQuestionIndex < questionsData.length && !questionsAttemptedFlags[currentQuestionIndex]) {
                    event.preventDefault();
                    selectOptionByKey(key);
                }
            }
        });

        populateSetSelector();
        loadQuestion();
        updateScoreboard(); 
    </script>
</body>
</html>
