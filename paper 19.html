<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper 6: Financial Accounting | Prepogy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            /* Theme Palette from Index */
            --theme-purple: #8b5fbf;
            --theme-blue: #4A90E2;
            --theme-yellow: #F5A623;
            --theme-pink: #ff6b9d;
            --theme-cyan: #4fd1c7;
            --theme-green: #48bb78;
            --text-dark: #333333;
            --text-light: #555555;
            --bg-light: #f7faff;
            --bg-white: #ffffff;
            --border-light: #e0e6ed;
            
            /* Gradients */
            --gradient-colorful: linear-gradient(135deg, var(--theme-purple), var(--theme-blue), var(--theme-pink), var(--theme-yellow));
            --gradient-ocean: linear-gradient(135deg, var(--theme-blue) 0%, var(--theme-cyan) 100%);
            --gradient-purple-blue: linear-gradient(135deg, var(--theme-purple) 0%, var(--theme-blue) 100%);
        }

        /* --- Animations --- */
        @keyframes rise {
            from { transform: translateY(0) rotate(0deg); opacity: 0.5; }
            to { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .animate-slideInRight {
            animation: slideInRight 0.4s ease-out;
        }

        @keyframes pop {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotateZ(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotateZ(360deg); opacity: 0; }
        }
        .confetti-particle {
            position: fixed;
            top: 0;
            left: 0;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            animation: confetti-fall 3s linear forwards;
        }


        /* --- Base Styles --- */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }

        /* --- Background Shapes --- */
        .shape-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: -1; overflow: hidden;
        }
        .shape {
            position: absolute; bottom: -150px; opacity: 0.3;
            animation: rise 20s linear infinite;
            font-weight: 700; line-height: 1; display: block;
        }
        /* A few shapes for context */
        .shape1 { left: 10%; font-size: 55px; color: var(--theme-yellow); animation-duration: 22s; animation-delay: -2s; }
        .shape2 { left: 20%; font-size: 45px; color: var(--theme-blue); animation-duration: 18s; animation-delay: -5s; }
        .shape3 { left: 80%; font-size: 65px; color: var(--theme-purple); opacity: 0.2; animation-duration: 28s; animation-delay: -1s; }
        .shape4 { left: 50%; font-size: 55px; color: var(--theme-pink); animation-duration: 20s; animation-delay: -3s; }
        .shape5 { left: 70%; font-size: 45px; color: var(--theme-cyan); animation-duration: 25s; animation-delay: -8s; }
        .shape6 { left: 90%; font-size: 60px; color: var(--theme-yellow); animation-duration: 19s; animation-delay: -4s; }


        /* --- Main UI Components --- */
        .quiz-wrapper {
            width: 100%;
            max-width: 800px;
            z-index: 1;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            animation: fadeInUp 0.5s ease-out;
            padding: 0 10px;
        }

        .home-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--gradient-purple-blue);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(139, 95, 191, 0.2);
        }
        .home-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(139, 95, 191, 0.3);
        }
        .home-btn i {
            font-size: 0.9em;
        }
        
        /* Set Navigation */
        #set-navigation-container {
            width: 100%;
            max-width: 800px;
            background: var(--bg-white);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-light);
            text-align: center;
            animation: fadeInUp 0.5s ease-out;
        }
        #set-navigation-container label {
            font-weight: 600;
            color: var(--text-dark);
            margin-right: 15px;
            font-size: 1.1rem;
            vertical-align: middle;
        }
        #set-selector {
            padding: 10px 15px;
            border-radius: 12px;
            border: 2px solid var(--border-light);
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            background-color: var(--bg-light);
            color: var(--text-dark);
            cursor: pointer;
            transition: border-color 0.3s;
            vertical-align: middle;
        }
        #set-selector:hover {
            border-color: var(--theme-blue);
        }
        #set-selector:focus {
            outline: none;
            border-color: var(--theme-blue);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.3);
        }


        /* Scoreboard */
        .scoreboard-container {
            background: var(--gradient-purple-blue);
            color: #ffffff;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(139, 95, 191, 0.2);
            width: 100%;
            max-width: 800px;
            margin-bottom: 25px;
            animation: fadeInUp 0.6s ease-out;
        }
        
        #scoreboard {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            font-size: 1rem;
            font-weight: 500;
            gap: 10px;
        }

        #scoreboard span {
            margin: 5px 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 12px;
            text-align: center;
        }
        
        /* Quiz Card */
        .quiz-card {
            background: var(--bg-white);
            border-radius: 25px;
            padding: 30px 40px;
            border: 1px solid var(--border-light);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.05);
            /* animation: fadeInUp 0.7s ease-out; */ /* We will trigger animation with JS */
            position: relative;
            overflow: hidden; /* To contain the slide-in animation */
        }

        .question-container {
             /* This container will hold the animated content */
        }

        .question-header {
            color: var(--theme-blue);
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-light);
            padding-bottom: 10px;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .question-text span.blank-span {
            display: inline-block;
            width: 60px;
            height: 1.2em;
            border-bottom: 2px solid var(--theme-purple);
            margin: 0 4px;
            vertical-align: bottom;
        }

        /* Options */
        .options-container {
            margin-bottom: 20px;
        }

        .option {
            display: flex;
            align-items: flex-start; /* Align with text start */
            padding: 15px 20px;
            margin-bottom: 15px;
            border: 2px solid var(--border-light);
            background-color: var(--bg-light);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .option:last-child {
            margin-bottom: 0;
        }

        .option:hover:not(.disabled) {
            border-color: var(--theme-blue);
            transform: translateX(5px);
            background-color: #f0f7ff;
        }

        .option-letter {
            width: 35px;
            height: 35px;
            background: var(--bg-white);
            border: 1px solid var(--border-light);
            color: var(--text-light);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 15px;
            flex-shrink: 0;
            transition: all 0.3s;
            margin-top: 2px; /* Align with first line of text */
        }
        .option-text {
            flex-grow: 1;
            line-height: 1.5;
        }

        /* States */
        .option.selected { 
            border-color: var(--theme-blue); 
            background-color: #eef6ff; 
        }
        .option.selected .option-letter { 
            background: var(--theme-blue); 
            color: white; 
            border-color: var(--theme-blue);
        }

        .option.correct-answer { 
            border-color: var(--theme-green); 
            background-color: #f0fff4; 
            animation: pop 0.3s ease-out;
        }
        .option.correct-answer .option-letter { 
            background: var(--theme-green); 
            color: white;
            border-color: var(--theme-green);
        }

        .option.incorrect-selection { 
            border-color: var(--theme-pink); 
            background-color: #fff0f6; 
            animation: pop 0.3s ease-out;
        }
        .option.incorrect-selection .option-letter { 
            background: var(--theme-pink); 
            color: white;
            border-color: var(--theme-pink);
        }
        
        .option.disabled {
            cursor: not-allowed;
            opacity: 0.9;
        }
        .option.disabled:not(.selected):not(.correct-answer):hover {
            transform: none;
            background-color: var(--bg-light);
        }


        /* Navigation */
        #navigation-buttons {
            display: flex;
            justify-content: space-between; 
            align-items: center;
            margin-top: 30px;
            border-top: 1px solid var(--border-light);
            padding-top: 25px;
        }

        .nav-btn {
            background: var(--gradient-ocean);
            color: white;
            border: none;
            padding: 12px 28px;
            text-align: center;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 8px 20px rgba(79, 209, 199, 0.3);
        }
        
        #prev-btn {
            background: var(--bg-white);
            color: var(--text-light);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-light);
        }
        #prev-btn:hover:not(:disabled) {
            background: #f9fafb;
            transform: translateY(-2px);
        }

        .nav-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(79, 209, 199, 0.4);
        }

        .nav-btn:disabled {
            background: #e0e6ed;
            color: #9ca3af;
            cursor: not-allowed;
            box-shadow: none;
            opacity: 0.7;
        }
        
        #completion-message {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--theme-purple);
            padding: 40px;
            animation: fadeInUp 0.5s ease-out;
        }
        #completion-message .final-score {
            font-size: 1.1rem;
            color: var(--text-dark);
            margin-top: 15px;
            font-weight: 400;
        }
        
        /* Responsive */
        @media (max-width: 600px) {
            body { padding: 10px; }
            .quiz-card { padding: 20px; }
            .question-text { font-size: 1.1rem; }
            .option { padding: 12px; }
            .nav-btn { padding: 10px 20px; font-size: 0.9rem; }
            #navigation-buttons { flex-direction: column-reverse; gap: 15px; }
            .nav-btn { width: 100%; justify-content: center; }
            #scoreboard { flex-direction: column; align-items: stretch; gap: 5px; }
            #scoreboard span { margin: 0; }
            .top-bar { padding: 0; }
            #set-navigation-container {
                display: flex;
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }
            #set-selector { width: 100%; }
        }
    </style>
</head>
<body>
    <!-- Animated Symbols Background -->
    <div class="shape-container">
        <div class="shape shape1">₹</div>
        <div class="shape shape2">$</div>
        <div class="shape shape3">₹</div>
        <div class="shape shape4">€</div>
        <div class="shape shape5">₹</div>
        <div class="shape shape6">×</div>
    </div>

    <div class="quiz-wrapper">
        <div class="top-bar">
            <a href="index.html" class="home-btn"><i class="fas fa-arrow-left"></i> Back to Home</a>
        </div>

        <div id="set-navigation-container">
            <label for="set-selector"><i class="fas fa-layer-group"></i> Switch to Set:</label>
            <select id="set-selector"></select>
        </div>

        <div id="scoreboard-container" class="scoreboard-container">
            <div id="scoreboard">
                <span id="correct-count">Correct: 0</span>
                <span id="incorrect-count">Incorrect: 0</span>
                <span id="attempted-count">Attempted: 0</span>
                <span id="accuracy-rate">Accuracy: N/A</span>
            </div>
        </div>

        <div id="quiz-container" class="quiz-card">
            <!-- This container is new, for the animation -->
            <div id="question-content-wrapper">
                <div id="question-header">Loading quiz...</div>
                <div id="question-text"></div>
                <div class="options-container" id="options-container">
                    <!-- Options will be dynamically inserted here -->
                </div>
            </div>
            
            <div id="navigation-buttons">
                <button id="prev-btn" class="nav-btn"><i class="fas fa-chevron-left"></i> Previous</button>
                <button id="next-btn" class="nav-btn">Next <i class="fas fa-chevron-right"></i></button>
            </div>
            <div id="completion-message" style="display:none;">
                <!-- Completion message dynamically inserted -->
            </div>
        </div>
    </div>

    <script>
        /*
         * --- PASTE ALL YOUR QUESTIONS HERE ---
         * The code will automatically divide them into sets of 15.
         *
         * I've added the first 15 questions for you.
         */
        const questionsData = [
            { q: "1. Goods within the meaning of supply does not includes:", o: ["Movable property", "Money and securities", "Actionable claim other than specified actionable claims", "All of the above"], c: "Money and securities" },
            { q: "2. Items out of the purview of supply are provided in:", o: ["Schedule I", "Schedule II", "Schedule III", "None of the above"], c: "Schedule III" },
            { q: "3. M/s R Associates of Chennai received certain consultancy services from A Inc. of USA. Both are not related person. The services received is without any consideration. Does the same classify as supply?", o: ["Yes. Being import of services in the course of business", "No. Since, party to the contract are not related", "On the prior approval of the Government", "None of the above"], c: "No. Since, party to the contract are not related" },
            { q: "4. X Ltd. Transferred certain assets forming part of business assets. The same was transferred free of cost without any consideration as a part of corporate social responsibility (CSR). What shall be the classification of such supply? X Ltd. Not availed Input Tax Credit on such assets.", o: ["Supply of goods", "Supply of services", "Does not qualify as supply", "Supply of goods and services or both"], c: "Does not qualify as supply" },
            { q: "5. While repairing the factory shed, few goods were also supplied along with the labour service. Whether it is a:", o: ["Composite Supply", "Mixed Supply", "Works Contract Service", "None of the above"], c: "Works Contract Service" },
            { q: "6. What would be the tax rate applicable in case of mixed supply?", o: ["Tax rate as applicable on supply attracting the lowest rate of tax", "Tax rate as applicable on supply attracting the highest rate of tax", "Tax @ 28%", "None of the above"], c: "Tax rate as applicable on supply attracting the highest rate of tax" },
            { q: "7. A person purchases a bundle of toothpaste along with Tooth brush. Toothpaste under this case is liable to GST @12% and tooth brush for instance is liable to GST @18% and is sold as a single unit for a single price. What shall be the tax rate applicable in case of such supply?", o: ["18%", "12%", "6%", "Nil"], c: "18%" },
            { q: "8. As per the CGST Act, 2017, the term 'works contract' includes:", o: ["Construction. fabrication, completion, erection, installation, etc. of movable property", "Construction, fabrication, completion, erection, installation, etc. of immovable property", "Both (a) and (b)", "None of the above"], c: "Construction, fabrication, completion, erection, installation, etc. of immovable property" },
            { q: "9. Which of the following are naturally bundled?", o: ["Hotel provides short-term accommodation and restaurant services", "Hotel provides short-term accommodation and coaching or teaching Indirect Taxes", "Hotel provides short-term accommodation and repairing services of customer watches", "Hotel provides short-term accommodation"], c: "Hotel provides short-term accommodation and restaurant services" },
            { q: "10. What is the threshold limit of turnover in the preceding financial year for opting to pay tax under composition scheme for States other than special category States?", o: ["20 lacs", "10 lacs", "50 lacs", "1.5 crore"], c: "1.5 crore" },
            { q: "11. What is the rate applicable under CGST to a registered person being a manufacturer opting to pay taxes under composition scheme?", o: ["2.50%", "1%", "0.50%", "No composition for manufacturer"], c: "0.50%" },
            { q: "12. Mr. Ram, a trader in Delhi has opted for composition scheme of taxation under GST. Determine the rate of total GST payable by him under composition scheme:", o: ["0.5% CGST & 0.5% SGST", "2.5% CGST & 2.5% UTGST", "5% IGST", "5% of UTGST"], c: "0.5% CGST & 0.5% SGST" },
            { q: "13. Can a registered person under composition scheme claim input tax credit?", o: ["Yes", "No", "Input tax credit on inward supply of goods only can be claimed", "Input tax credit on inward supply of services only can be claimed"], c: "No" },
            { q: "14. What will happen if the turnover of a registered person opting to pay taxes under composition scheme during the year 2024-25 crosses threshold limit?", o: ["He can continue under composition scheme till the end of the financial year", "He will be liable to pay tax at normal rates of GST on the entire turnover for the financial year 2024-25", "He will cease to remain under the composition scheme with immediate effect", "He will cease to remain under the composition scheme from the quarter following the quarter in which the aggregate turnover exceeds threshold limit"], c: "He will cease to remain under the composition scheme with immediate effect" },
            { q: "15. Aggregate turnover does not include-", o: ["Inward supplies on which tax is payable on reverse charge basis", "Exempt supplies", "Export of goods or services or both", "Inter-State supplies of persons having the same PAN number"], c: "Inward supplies on which tax is payable on reverse charge basis" },
            { q: "16. X Ltd. has provided following information for the month of January 2024: (i) Intra-State outward supply ₹8,00,000/- (ii) Inter-State exempt outward supply ₹5,00,000/- (iii) Turnover of exported goods ₹10,00,000/- (iv) Payment made to GTA ₹80,000/- (ITC not availed by GTA). Calculate the aggregate turnover of X Ltd.", o: ["28,00,000/-", "23,80,000/-", "23,00,000/-", "18,00,000/-"], c: "23,00,000/-" },
            { q: "17. The person was operating in regular scheme. Now in financial year 2022-23, he wants to opt for the composition scheme. Which form he must file to provide details of the input tax credit in respect of the stock of goods held with him on the day preceding the date of opting in composition scheme?", o: ["Form GST ITC-01", "Form GST ITC-02", "Form GST ITC-03", "Form GST ITC-04"], c: "Form GST ITC-03" },
            { q: "18. The person was operating under normal scheme, but now he wants to convert in composition scheme so which form he must file?", o: ["Form GST CMP-01", "Form GST CMP-02", "Form GST CMP-03", "Form GST CMP-04"], c: "Form GST CMP-02" },
            { q: "19. In which form can the person file for withdrawal of composition scheme?", o: ["Form GST CMP-01", "Form GST CMP-02", "Form GST CMP-03", "Form GST CMP-04"], c: "Form GST CMP-04" },
            { q: "20. What document shall a person under composition scheme issue to its customer?", o: ["Bill of supply", "Tax invoice", "Invoice", "Debit note"], c: "Bill of supply" },
            { q: "21. Which return must be filed by the composition dealer?", o: ["GSTR-3B", "GSTR-5", "GSTR-4", "GSTR-6"], c: "GSTR-4" },
            { q: "22. Calculate the tax to be paid by Mr. C, a composition dealer who supplied laptops being a trader from the following data: (i) Cost of purchases ₹3,00,000 plus GST 12%. (ii) Profit Margin 40% on cost of purchases.", o: ["4,704", "7,404", "4,074", "None of the above"], c: "4,704" },
            { q: "23. If the show cause notice in Form GST CMP-05 has been issued on 15th March 2019, then by when can the taxpayer (composition dealer) submit his reply?", o: ["Within 90 days", "Within 180 days", "Within 15 days", "Within 60 days"], c: "Within 15 days" },
            { q: "24. Service provider other than section 10 of CGST Act, 2017 can opt to pay GST under composition scheme only when", o: ["whose aggregate turnover in the preceding financial year was Rs.50 lakh or below", "whose aggregate turnover in the preceding financial year was Rs.150 lakh or below", "whose aggregate turnover in the preceding financial year was Rs.75 lakh or below", "whose aggregate turnover in the preceding financial year was below Rs.50 lakh"], c: "whose aggregate turnover in the preceding financial year was Rs.50 lakh or below" },
            { q: "25. Under _____ section of CGST Act and _____ section of IGST Act, Government can issue a general exemption notification", o: ["Section 11(1) of the CGST Act & Section 6(1) of the IGST Act", "Section 6(1) of the IGST Act & Section 11(1) of the CGST Act", "Section 11(2) of the CGST Act & Section 6(2) of the IGST Act", "Section 11(3) of the CGST Act & Section 6(3) of the IGST Act"], c: "Section 11(1) of the CGST Act & Section 6(1) of the IGST Act" },
            { q: "26. Under _____ section of CGST Act and _____ section of IGST Act. Government exemption by way of special order", o: ["Section 11(2) of the CGST Act & Section 6(2) of the IGST Act", "Section 6(2) of the IGST Act & Section 11(2) of the CGST Act", "Section 11(1) of the CGST Act & Section 6(2) of the IGST Act", "Section 11(3) of the CGST Act & Section 6(3) of the IGST Act"], c: "Section 11(2) of the CGST Act & Section 6(2) of the IGST Act" },
            { q: "27. Services by a hotel, inn, guest house, club or campsite are not exempted for residential/lodging purposes-", o: ["If the actual tariff for a unit of accommodation is below Rs. 10,000", "irrespective of tariff value for a unit of accommodation", "If the actual tariff for a unit of accommodation is exactly Rs.1,000", "If the actual tariff for a unit of accommodation is above Rs.1,000"], c: "If the actual tariff for a unit of accommodation is above Rs.1,000" },
            { q: "28. One of the following is exempted from GST-", o: ["Any business exhibition", "A business exhibition in India", "A business exhibition outside India", "None of the above"], c: "A business exhibition outside India" },
            { q: "29. Exemption can be claimed at _____ stage even if not claimed at _____ stage.", o: ["Adjudication, Investigation", "Investigation, Adjudication", "Any, prior", "None of the above"], c: "Adjudication, Investigation" },
            { q: "30. Levy of GST on Priority Sector Lending Certificate (PSLC) under", o: ["Exempted supply of goods", "Reverse Charge Mechanism (RCM)", "Forward Charge", "Partial Reverse Charge Mechanism"], c: "Reverse Charge Mechanism (RCM)" },
            { q: "31. Mr. A, who has opted for composition levy, supplies goods worth Rs.24,300 to Mr. B and issues an invoice dated 25.09.20XX for Rs.24,300. and Mr. B pays Rs.25,000 on 1.10.20XX against such supply of goods. The excess Rs. 700 (being less than Rs.1,000) is adjusted in the next invoice for supply of goods issued on 5.01.20XX. Identify the time of supply and value of supply:", o: ["For Rs.25,000- 1.10.20XX", "For Rs.24,300- 25.09.20XX and for Rs.700-1.10.20XX", "For Rs.24,300 25.09.20XX and for Rs.700- 5.10.20XX.", "(b) or (c) at the option of supplier, who has opted for composition levy"], c: "(b) or (c) at the option of supplier, who has opted for composition levy" },
            { q: "32. ABC Ltd has purchased for its customer 50 vouchers date 20th Aug 20XX worth 500 each from Ram Pvt. Ltd. a footwear manufacturing company. The vouchers were issued by Ram Pvt. Ltd on 20th Sep 20XX. The vouchers can be encashed at retail outlets of Ram Pvt. Ltd. The employees of ABC Ltd. enchased the same on 1st Oct 20XX. Determine the time of supply of vouchers.", o: ["20th Aug 20XX", "20th Sep 20XX", "1st Oct 20XX", "None of the above"], c: "20th Sep 20XX" },
            { q: "33. Determine the amount of GST in case of supply of service of ₹10,00,000 on 4th Sep 20XX and invoice has also been issued on the same date. The date of payment is 30th Aug 20XX. The CGST rate has been increased from 5% to 12% w.e.f. Ist Sep 20XX", o: ["₹50,000", "₹1,00,000", "₹70,000", "₹1,20,000"], c: "₹1,20,000" },
            { q: "34. There was decrease in tax rate from 28% to 18% w.e.f. 1.09.2024. Which of the following rate is applicable if the supplier has not opted for composition levy and supplies goods to Customer? Further, Goods were removed from its factory on 31.08.2024; delivered at buyer place on 2.02.2024; invoice is issued on 31.08.2024 and payment is received on 4.09.2024.", o: ["18% as it is lower of the two", "28% as date of invoice and dispatch of goods from factory, has happened before change of rate", "18% as both, payment and completion of supply, has happened after change of rate", "none of the above"], c: "28% as date of invoice and dispatch of goods from factory, has happened before change of rate" },
            { q: "35. Money transferred service provided to foreign entity by Indian supplier of service is intermediary service and subject to", o: ["CGST & SGST", "CGST & UTGST", "IGST", "UTGST"], c: "IGST" },
            { q: "36. If RR shipping Co. located in Chennai charges ocean freight charges for transport of goods to USA for a customer located in Hyderabad, the place of supply of service will be", o: ["Chennai", "USA", "Hyderabad", "None of the above"], c: "Hyderabad" },
            { q: "37. Agency fees paid to foreign banks for arranging finance is", o: ["Export of service", "Import of service", "Tax free service", "None of the above"], c: "Import of service" },
            { q: "38. Mr. Ram a second-hand car dealer purchased a second hand car for ₹2,50,000. He sold he same car to Mr. Lakshman for ₹3,00,000. Determine value of supply?", o: ["3,00,000", "₹2,50,000", "₹50,000", "None of the above"], c: "₹50,000" },
            { q: "39. Thomas Cook Forex Pvt. Ltd. being a registered person under GST purchased 2000 USD from M/s R Academy at the rate of INR 70 per USD. Actual exchange rate at that time was ₹70 per Dollar. RBI reference rate not available. What shall be the value of such supply", o: ["1,30,000", "1,40,000", "2,00,000", "None of the above"], c: "1,40,000" },
            { q: "40. What will be the value of supply if X & Co., supply Sony television set for ₹85000 along with the exchange of an old TV and if the price of the Sony television set without exchange is ₹1,00,000, the open market value of the Sony television set is:", o: ["85,000", "₹1,00,000", "15,000", "1,15,000"], c: "₹1,00,000" },
            { q: "41. The time limit to pay the value of supply with taxes to the supplier to avail the input tax credit is", o: ["3 months", "6 months", "180 Days", "Till the date of filling of annual return."], c: "180 Days" },
            { q: "42. As per Rule 42(2) of the CGST Rules, 2017 where the aggregate of the amount calculated finally in respect of ineligible credit exceeds the aggregate of the amounts determined under rule 42(1)(i) and (j), such excess shall be added to the output tax liability of the registered person in the month not later than the month of", o: ["March following the end of the financial year to which such credit relates", "June following the end of the financial year to which such credit relates", "September following the end of the financial year to which such credit relates", "None of the above"], c: "September following the end of the financial year to which such credit relates" },
            { q: "43. As per Rule 42(2) of the CGST Rules, 2017... such excess shall be added to the output tax liability... and the said person shall be liable to pay ____ on the said excess amount... for the period starting from the 1st day of April of the succeeding financial year till the date of payment", o: ["interest 24% p.a.", "interest 18% p.a.", "interest 28% p.a.", "interest 12% p.a."], c: "interest 18% p.a." },
            { q: "44. Banking company or Financial Institution have an option of claiming:", o: ["Eligible Credit or 50% credit", "Only 50% Credit", "Only Eligible credit", "Eligible credit and 50% credit"], c: "Eligible Credit or 50% credit" },
            { q: "45. An assessee obtains new registration, voluntary registration, change of scheme from composition to regular scheme and from exempted goods/services to taxable goods/services. It can avail credit on inputs lying in stock. What is the time limit for taking said credit?", o: ["3 years from the date of invoice", "1 years from the date of invoice", "5 years from the date of invoice", "None of the above"], c: "1 years from the date of invoice" },
            { q: "46. Maximum time limit for availing ITC is", o: ["The date of filing of annual return", "30th November of the following financial year", "Earliest of above two", "Later of above two."], c: "Later of above two." },
            { q: "47. In case of supply of plant & machinery on which ITC is taken, tax to be paid on is", o: ["Amount equal to ITC availed less 5% for every quarter or part thereof", "Tax on transaction value", "Higher of above two", "Lower of above two"], c: "Higher of above two" },
            { q: "48. Mr. C, a practicing Cost Accountant purchased 3 laptops each having tax element of ₹1,25,000 in his firm name. Two laptops he utilized in his office whereas one laptop he gifted to his sister. What is the amount of ineligible ITC?", o: ["1,25,000", "₹2,50,000", "2,75,000", "None of the above"], c: "1,25,000" },
            { q: "49. ABC Pvt Ltd. purchased a machinery on 15th July 2023 for 10 lacs on which IGST was paid @ 18%. He availed the ITC & utilized the capital goods. On 16th October 2024 he sold the machinery as second hand goods for ₹7,50,000. Calculate the amount of ITC that needs to be paid.", o: ["1,26,000", "1,35,000", "Lower of (a) or (b)", "Higher of (a) or (b)"], c: "1,26,000" },
            { q: "50. Mr. Ajay purchased goods from Mr. Chethan, a composition dealer worth ₹100,000. Since Mr. Chethan was trader so he was supposed to pay only 1% of his turnover as his tax. The item so purchased was otherwise taxable at 12%. What is the amount of credit which Mr. Ajay is eligible to take?", o: ["990", "12,000", "1,000", "Not eligible to claim credit"], c: "Not eligible to claim credit" },
            { q: "51. What is the rate of TDS?", o: ["1%", "4%", "5%", "18%"], c: "1%" },
            { q: "52. What is the due date for payment of TDS?", o: ["Last day of the month to which payment relates", "Within 10 days of the subsequent month", "Within 20 days of the subsequent month", "Within 15 days of the subsequent month"], c: "Within 10 days of the subsequent month" },
            { q: "53. What is the due date for issue of TDS Certificate?", o: ["The date of payment of TDS", "Within 10 days from the date of payment of TDS", "Within 20 days from the date of payment of TDS", "Within 05 days from the date of payment of TDS"], c: "Within 05 days from the date of payment of TDS" },
            { q: "54. Every registered person required to deduct tax at source under section 51 shall furnish return, in _____ for the month in which such deductions have been made within 10 days after the end of such month.", o: ["Form GSTR-5", "Form GSTR-6", "Form GSTR-7", "Form GSTR-8"], c: "Form GSTR-7" },
            { q: "55. When should the e-commerce operator remit the amount of TCS to government and file the necessary returns with the government?", o: ["Within 10 days after the end of the month in which such amount was collected", "Within 10 days after the end of the month in which such amount was collected, but no time limit for filing the return", "Within 10 days after the end of the month in which such amount was collected, but no time limit for paying the money", "No time limit for both"], c: "Within 10 days after the end of the month in which such amount was collected" },
            { q: "56. When an e-commerce operator is required to register under GST?", o: ["When he is required to collect tax at source u/s 52", "When his aggregate turnover exceeds the threshold limit", "It is mandatory to register irrespective of the threshold limit.", "When he is required to collect tax at source u/s 52 and his aggregate turnover exceeds the threshold limit."], c: "When he is required to collect tax at source u/s 52" },
            { q: "57. The validity period of E-Way Bill is said to initiate when:", o: ["Part A is completely filled", "Part B is completely Filled", "Both Parts are filled completely", "None of the above"], c: "Part B is completely Filled" },
            { q: "58. E-Way bill generation facility of a person paying tax under regular scheme will be blocked if he has not furnished the returns for a consecutive period of?", o: ["2 months", "2 tax periods", "3 tax periods", "6 tax periods"], c: "2 tax periods" },
            { q: "59. What shall be the validity of E-Way bill in case of vehicles other than over dimensional cargo?", o: ["One day per 200 kms.", "One day per 20 kms.", "Both (a) & (b)", "None of the above"], c: "One day per 200 kms." },
            { q: "60. Zero rated supply includes:", o: ["Export of goods and services.", "Supply of goods and services to a SEZ developer or SEZ Unit", "Supply of goods and services by a SEZ developer or SEZ Unit", "Both (a) and (b)"], c: "Both (a) and (b)" },
            { q: "61. Refund application is to be filed before the expiry of _____ from the relevant date.", o: ["Two years", "One year", "180 days", "260 days"], c: "Two years" },
            { q: "62. Refund shall not be paid to the applicant if the amount of refund is less than-", o: ["1,000", "5,000", "7,000", "10,000"], c: "1,000" },
            { q: "63. Refunds would be allowed on a provisional basis in case of refund claims on account of zero-rated supplies of goods and/or services made by registered persons. At what percentage, would such provisional refunds be granted?", o: ["70%", "65%", "80%", "90%"], c: "90%" },
            { q: "64. Late fee for annual return for a tax payer having an aggregate turnover up to ₹5 crore in the relevant financial year is:", o: ["₹50 for everyday subject to a maximum of 0.04% of turnover in the State or Union Territory", "₹100 for everyday subject to a maximum of 0.25% of turnover in the State or Union Territory", "₹200 for everyday subject to a maximum of 0.50% of turnover in the State or Union Territory", "₹100 for everyday subject to a maximum of 0.50% of turnover in the State or Union Territory."], c: "₹50 for everyday subject to a maximum of 0.04% of turnover in the State or Union Territory" },
            { q: "65. Every registered person whose aggregate turnover during a financial year exceeds ₹2 crore rupees shall get his accounts audited and furnish a copy of audited annual accounts and a reconciliation statement, duly certified, in-", o: ["Form GSTR-9", "Form GSTR-9C", "Form GSTR-11", "Form GSTR-11A"], c: "Form GSTR-9C" },
            { q: "66. The Appellant Authority for Advance Ruling shall comprise of:", o: ["Chief Commissioner of Central tax as designated by the Board and Commissioner of State tax/Union Territory tax, having jurisdiction over the applicant.", "Principal Chief Commissioner of Central tax and Commissioner of State tax/union Territory tax, having jurisdiction over the applicant.", "Two sitting High Court Judges.", "None of the above."], c: "Chief Commissioner of Central tax as designated by the Board and Commissioner of State tax/Union Territory tax, having jurisdiction over the applicant." },
            { q: "67. Appeal before AAAR can be filed within how many days?", o: ["30 days", "60 days", "90 days", "120 days"], c: "30 days" },
            { q: "68. As per section 69(2) of CGST Act, 2017, where a person is arrested under sub-section (1) for an offence specified under sub- section (5) of section 132, the officer authorised to arrest the person shall inform such person of the grounds of arrest and produce him before a Magistrate within _____ hours:", o: ["four", "twenty-four", "twenty-five", "twenty-six"], c: "twenty-four" },
            { q: "69. What action should be taken by an assessee to satisfy with anti-profiteering provision?", o: ["Reduce rate of tax on any supply of goods or services, if such assessee has got the benefit of such reduced rate", "Pass on the benefit of input tax credit, if such assessee has got such input tax credit", "Both (a) and (b)", "none of the above"], c: "Both (a) and (b)" },
            { q: "70. 1,00,000 MT goods are imported for 10 lakh but goods actually received are 95,000 MT. In this case, value of goods liable to duty is-", o: ["10,00,000", "9,50,000", "50,000", "10,50,000"], c: "9,50,000" },
            { q: "71. Assessable value of goods is ₹5,00,000 (US $10,000 at ₹50 per US $) as per bill of entry for warehousing and BCD is 15%. The goods were cleared from warehouse on date when BCD is 10% and rate is ₹60 per $. IGST & GST Cess is NIL and Social Welfare Surcharge is 10%. Total duty =", o: ["55,000", "66,000", "82,500", "99,000"], c: "66,000" },
            { q: "72. Calculate Free on Board value from following: Ex-factory price of exporter-₹10,000; Expenses upto loading of goods by foreign exporter-₹12,000. Post importation cost-₹8000:", o: ["30,000", "22,000", "18,000", "22,250"], c: "22,000" },
            { q: "73. Calculate Cost of transport/handling under Rule 10(2)(a) if FoB and insurance cost [total] is $5000:", o: ["$2,500", "$6,000", "$1,000", "None of the above"], c: "$1,000" },
            { q: "74. From following data, find out the assessable value of imported goods: Cost of the machine at the factory of the exporting country- $ 5,000; Transport charges incurred by the exporter from his factory to the port for shipment- $ 250; Handling charges paid for loading the machine in the ship- $25; Buying commission paid by the importer- $25; Freight charges from exporting country to India (including handling charges $ 100)-$500. Exchange rate to be considered: $1 = ₹45.", o: ["2,62,545.47", "2,37,375.00", "2,59,875.00", "None of the above"], c: "2,62,545.47" },
            { q: "75. Compute value: Machinery imported from USA by air (FOB price)- $8,000; Accessories compulsorily supplied along with the machinery $2,000; Air freight $2400; Insurance charges not available; Local agent's commission to be paid in Indian Currency- ₹18,600; Exchange rate US $1 = ₹48:", o: ["4,98,600", "6,03,929.25", "5,98,320", "None of the above."], c: "6,03,929.25" },
            { q: "76. Determine price to be taken for computing deductive value in rule 7: Sale quantity-80 units @ ₹90, 50 units @ ₹95, 25 units @ ₹105, 40 units @ ₹100:", o: ["105", "₹100", "₹95", "₹90"], c: "₹90" },
            { q: "77. Computed value DOES NOT consist of:", o: ["cost of materials and fabrication or other processing employed in producing the imported goods.", "reasonable profit of foreign exporter", "the cost or value of all other expenses under rule 10(2)", "reasonable profit of Indian importer."], c: "reasonable profit of Indian importer." },
            { q: "78. The proper officer shall have the powers to raise doubts on the truth or accuracy of the declared value based on certain reasons which may include:", o: ["the sale involves an abnormal discount or abnormal reduction from ordinary competitive price.", "the sale involves special discounts limited to exclusive agents.", "Both (a) & (b)", "None of the above."], c: "Both (a) & (b)" },
            { q: "79. Value of Personal Computer is ₹1,10,000 and Personal Effects is ₹60,000 and duty-free allowance is ₹50,000. What is the value of the baggage liable to duty?", o: ["50,000", "₹60,000", "70,000", "₹10,000"], c: "₹60,000" },
            { q: "80. After visiting UK for 10 days, Mr. K brought to India a laptop computer valued at ₹76,000, personal effects valued at ₹1,20,000 and a personal computer for ₹72,000. What is the customs Duty payable?", o: ["22,000", "8,470", "10,000", "15,000"], c: "8,470" },
            { q: "81. The current limit of ₹1 lakh per annum for duty free import of samples in terms of NT 154/94-Customs, dated 13.7.1994 is enhanced to:", o: ["₹30 lakh per annum (w.e.f. 27.2.2010)", "₹3 lakh per annum (w.e.f. 27.2.2010)", "₹13 lakh per annum (w.e.f. 27.2.2010)", "₹3 lakh per month (w.e.f. 27.2.2010)."], c: "₹3 lakh per annum (w.e.f. 27.2.2010)" },
            { q: "82. A Gentleman passenger returning to India having resided abroad for more than a year shall be allowed clearance free of duty jewellery in his bona fide baggage to the extent of the following:", o: ["₹50,000", "₹1,00,000", "₹1,50,000", "None of the above."], c: "₹50,000" },
            { q: "83. A Lady passenger returning to India having resided abroad for more than a year shall be allowed clearance free of duty jewellery in his bona fide baggage to the extent of the following:", o: ["₹50,000", "₹1,00,000", "₹1,50,000", "None of the above."], c: "₹1,00,000" },
            { q: "84. A person, who is engaged in a profession abroad, or is transferring his residence to India after stayed abroad more than 2 years can bring, used household items without payment of duty up to:", o: ["₹50,00,000", "₹25,00,000", "₹5,00,000", "₹50,000"], c: "₹5,00,000" },
            { q: "85. Section 58 the Principal Commissioner of Customs or Commissioner of Customs may, subject to such conditions as may be prescribed, license a _____ wherein dutiable goods imported by or on behalf of the licensee may be deposited.", o: ["private warehouse", "public warehouse", "special warehouse", "warehouse"], c: "public warehouse" },
            { q: "86. _____ grants the permission for manufacturing or other operations in the bonded facility.", o: ["Assistant Commissioner of Customs", "Deputy Commissioner of Customs", "Additional Commissioner of Customs", "Commissioner of Customs"], c: "Commissioner of Customs" },
            { q: "87. At present manufacture, and other operations in which bonded warehouse is not allowed?", o: ["Public Bonded Warehouse", "Special Bonded warehouses", "Only Private Bonded warehouse", "Both (a) and (b)"], c: "Public Bonded Warehouse" },
            { q: "88. Maximum duty drawback rate @ ____ on FOB value of exports.", o: ["45%", "15%", "25%", "33%"], c: "33%" },
            { q: "89. Once a _____ is cleared for home consumption, the bond submitted by the importer gets debited automatically in the customs automated system and the details shall be made available electronically to the Jurisdictional Custom Officer", o: ["Bill of Entry", "Shipping Bill", "Entry inwards", "Enty outwards"], c: "Bill of Entry" },
            { q: "90. Full form of IIN", o: ["Import of goods at concessional rate of duty Identification Number", "Import of Goods at Concessional Rate Identification Number", "Import of Goods Identification Number", "Import at Concessional Rate Identification Number"], c: "Import of Goods at Concessional Rate Identification Number" },
            { q: "91. The importer who intends to avail the benefit of an exemption notification shall mention the _____ as indicated in sub-rule (2) of rule 4 of Customs (Import of goods at Concessional rate of duty) Rules, and continuity bond number and details while filing the _____", o: ["IIN", "IIN, Bill of Entry", "Bill of Entry", "Both (a) & (c)"], c: "Both (a) & (c)" },
            { q: "92. The importer shall submit a monthly statement on the common portal in the Form IGCR-3 (Import of Goods at Concessional Rate of Duty) appended to these rules by the _____ day of the following month.", o: ["Tenth", "Twentieth", "Fiftieth", "Eleventh"], c: "Tenth" },
            { q: "93. Value of goods to be exported as gift can't exceed _____ in a licensing year", o: ["₹7,00,000.00", "₹10,00,000.00", "₹50,00,000.00", "₹5,00,000.00"], c: "₹5,00,000.00" },
            { q: "94. Minimum value addition required to be achieved under DFIA is", o: ["10%", "15%", "20%", "5%"], c: "20%" },
            { q: "95. Only projects having a minimum investment of _____ in plant & machinery shall be considered for establishment as EOUs.", o: ["1 crore", "10 crores or above", "Below 35 crores", "100 crores or above"], c: "1 crore" },
            { q: "96. Status holders shall be entitled to export freely exportable items (excluding Gems and Jewelry, Articles of Gold and precious metals) on free of cost basis for export promotion subject to an annual limit of", o: ["Rupees One Crore or @2% of average annual export realization during preceding three licensing years, whichever is lower.", "8% of average annual export realization during preceding 3 licencing years", "2% of average annual export realization during preceding 3 licencing years", "8% of average annual export realization during preceding 2 licencing years"], c: "Rupees One Crore or @2% of average annual export realization during preceding three licensing years, whichever is lower." },
            { q: "97. The companies or industries flexibility to allow a maximum of _____ of their employees to work from home and along with prior permission to temporarily remove goods such as laptops, computers, electronic equipment, etc., from the SEZ unit to a domestic tariff area without payment of duty.", o: ["50%", "100%", "25%", "15%"], c: "50%" },
            { q: "98. In case the developer submit the proposal to the State Government for The SEZ approval, then state government forwards this proposal to the Board of Approval (BoA) along with its recommendation within.", o: ["five days", "forty days", "fifty-five days", "forty-five days"], c: "forty-five days" },
            { q: "99. When an SEZ supplies goods/services to a Domestic Tariff Area (DTA), it is exempt from paying taxes, although the receiver in the DTA has to pay:", o: ["IGST under reverse charge mechanism (RCM).", "CGST and SGST under reverse charge mechanism (RCM).", "CGST and UTGST under reverse charge mechanism (RCM).", "IGST under forward charge"], c: "IGST under reverse charge mechanism (RCM)." }
        ];

        // --- END OF QUESTION DATA ---


        let currentQuestionIndex = 0;
        let userAnswers = new Array(questionsData.length).fill(null); 
        let questionsAttemptedState = new Array(questionsData.length).fill(false); 

        let score = {
            correct: 0,
            incorrect: 0
        };

        // --- Set Configuration ---
        const totalQuestions = questionsData.length;
        const setSize = 15; // 15 questions per set
        const numSets = Math.ceil(totalQuestions / setSize);
        const questionsPerSet = [];
        const setStartIndices = [];

        for(let i = 0; i < numSets; i++) {
            setStartIndices.push(i * setSize);
            const size = Math.min(setSize, totalQuestions - (i * setSize));
            questionsPerSet.push(size);
        }
        // --- End Set Configuration ---


        // DOM Elements
        const questionHeaderElement = document.getElementById('question-header');
        const questionTextElement = document.getElementById('question-text');
        const optionsContainerElement = document.getElementById('options-container');
        const nextButton = document.getElementById('next-btn');
        const prevButton = document.getElementById('prev-btn');
        const completionMessageElement = document.getElementById('completion-message');
        const setSelectorElement = document.getElementById('set-selector');
        const navigationButtons = document.getElementById('navigation-buttons'); 
        const quizContainer = document.getElementById('quiz-container');
        const questionContentWrapper = document.getElementById('question-content-wrapper');


        const correctCountElement = document.getElementById('correct-count');
        const incorrectCountElement = document.getElementById('incorrect-count');
        const attemptedCountElement = document.getElementById('attempted-count');
        const accuracyRateElement = document.getElementById('accuracy-rate');
        
        function populateSetSelector() {
            setSelectorElement.innerHTML = ''; 
            questionsPerSet.forEach((num, index) => {
                if (num === 0) return;
                
                const option = document.createElement('option');
                option.value = index; 
                const startQ = setStartIndices[index] + 1;
                const endQ = setStartIndices[index] + num;
                
                option.textContent = `Set ${index + 1} (Q ${startQ} - ${endQ})`;
                setSelectorElement.appendChild(option);
            });
            setSelectorElement.addEventListener('change', (event) => {
                const selectedSetIndex = parseInt(event.target.value);
                currentQuestionIndex = setStartIndices[selectedSetIndex];
                
                // Reset visibility for quiz
                completionMessageElement.style.display = 'none';
                questionContentWrapper.style.display = 'block';
                navigationButtons.style.display = 'flex'; 
                
                loadQuestion(false); // Load question without animation for set switch
            });
        }

        function getCurrentSetInfo(index) {
            for (let i = 0; i < setStartIndices.length; i++) {
                const setStartIndex = setStartIndices[i];
                const setEndIndex = setStartIndex + questionsPerSet[i] - 1;
                
                if (index >= setStartIndex && index <= setEndIndex) {
                    // Update dropdown silently if needed
                    if (setSelectorElement.value != i) { 
                         setSelectorElement.value = i; 
                    }
                    return { setNumber: i + 1, totalSets: numSets };
                }
            }
            return { setNumber: numSets, totalSets: numSets }; // Fallback
        }
        
        function updateScoreboard() {
            score.correct = 0;
            score.incorrect = 0;
            let attempted = 0;

            for (let i = 0; i < totalQuestions; i++) {
                if (questionsAttemptedState[i]) {
                    attempted++;
                    const currentQuestion = questionsData[i];
                    // Correct answer is stored as text in 'c'
                    const correctAnswerText = currentQuestion.c; 
                    if (userAnswers[i] === correctAnswerText) {
                        score.correct++;
                    } else {
                        score.incorrect++;
                    }
                }
            }
            
            correctCountElement.textContent = `Correct: ${score.correct}`;
            incorrectCountElement.textContent = `Incorrect: ${score.incorrect}`;
            attemptedCountElement.textContent = `Attempted: ${attempted}`;
            if (attempted > 0) {
                const accuracy = (score.correct / attempted * 100).toFixed(1);
                accuracyRateElement.textContent = `Accuracy: ${accuracy}%`;
            } else {
                accuracyRateElement.textContent = `Accuracy: N/A`;
            }
        }

        function loadQuestion(animate = true) {
            if (currentQuestionIndex < 0) currentQuestionIndex = 0; 
            if (currentQuestionIndex >= totalQuestions) { 
                showCompletionMessage();
                return;
            }

            // --- Animation ---
            if (animate) {
                questionContentWrapper.classList.remove('animate-slideInRight');
                // Trigger reflow to restart animation
                void questionContentWrapper.offsetWidth; 
                questionContentWrapper.classList.add('animate-slideInRight');
            }
            // --- End Animation ---


            const currentQuestion = questionsData[currentQuestionIndex];
            const setInfo = getCurrentSetInfo(currentQuestionIndex);
            
            // Correct answer is stored as text in 'c'
            const correctAnswerText = currentQuestion.c; 

            questionHeaderElement.innerHTML = `<strong>Question ${currentQuestionIndex + 1}</strong> of ${totalQuestions} (<strong>Set ${setInfo.setNumber}</strong> of ${setInfo.totalSets})`;
            
            // Question text already has numbers, so just use it
            let qText = currentQuestion.q;
            qText = qText.replace(/____/g, '<span class="blank-span"></span>');
            questionTextElement.innerHTML = qText;

            optionsContainerElement.innerHTML = ''; 
            currentQuestion.o.forEach((optionText, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.dataset.optionText = optionText; 
                
                const optionLetter = String.fromCharCode(65 + index); 
                // No cleanText needed for this file
                optionElement.innerHTML = `<span class="option-letter">${optionLetter}</span> <span class="option-text">${optionText}</span>`;
                
                if (questionsAttemptedState[currentQuestionIndex]) { 
                    optionElement.classList.add('disabled');
                    if (optionText === userAnswers[currentQuestionIndex]) {
                        optionElement.classList.add('selected');
                        if (userAnswers[currentQuestionIndex] === correctAnswerText) {
                            optionElement.classList.add('correct-answer');
                        } else {
                            optionElement.classList.add('incorrect-selection');
                        }
                    }
                    if (optionText === correctAnswerText) { 
                         optionElement.classList.add('correct-answer'); 
                    }
                } else {
                    optionElement.addEventListener('click', () => handleOptionSelection(optionElement, optionText));
                }
                optionsContainerElement.appendChild(optionElement);
            });

            // Update button text and icons
            if (currentQuestionIndex === totalQuestions - 1) {
                nextButton.innerHTML = 'Finish Quiz <i class="fas fa-check"></i>';
            } else {
                nextButton.innerHTML = 'Next <i class="fas fa-chevron-right"></i>';
            }
            nextButton.disabled = false; 
            prevButton.disabled = (currentQuestionIndex === 0);

            // Ensure quiz container is visible
            questionContentWrapper.style.display = 'block';
            navigationButtons.style.display = 'flex';
            completionMessageElement.style.display = 'none';
        }

        function handleOptionSelection(selectedDiv, selectedOptionText) {
            if (questionsAttemptedState[currentQuestionIndex]) return; 

            questionsAttemptedState[currentQuestionIndex] = true;
            userAnswers[currentQuestionIndex] = selectedOptionText;

            const currentQuestion = questionsData[currentQuestionIndex];
            // Correct answer is stored as text in 'c'
            const correctAnswerText = currentQuestion.c; 

            Array.from(optionsContainerElement.children).forEach(optDiv => {
                optDiv.classList.add('disabled'); 
                if (optDiv.dataset.optionText === correctAnswerText) { 
                    optDiv.classList.add('correct-answer');
                }
                if (optDiv === selectedDiv) { 
                    optDiv.classList.add('selected');
                    if (selectedOptionText !== correctAnswerText) {
                        optDiv.classList.add('incorrect-selection'); 
                    }
                }
            });
            updateScoreboard();
        }
        
        function selectOptionByKey(key) {
            if (questionsAttemptedState[currentQuestionIndex]) return;

            let optionIndex = -1;
            if (key === 'a' || key === '1') optionIndex = 0;
            else if (key === 'b' || key === '2') optionIndex = 1;
            else if (key === 'c' || key === '3') optionIndex = 2;
            else if (key === 'd' || key === '4') optionIndex = 3;

            if (optionIndex !== -1 && optionIndex < optionsContainerElement.children.length) {
                const optionDiv = optionsContainerElement.children[optionIndex];
                if (optionDiv && !optionDiv.classList.contains('disabled')) {
                    handleOptionSelection(optionDiv, optionDiv.dataset.optionText);
                }
            }
        }

        function nextQuestionHandler() {
            if (currentQuestionIndex === totalQuestions - 1) {
                currentQuestionIndex++; 
                showCompletionMessage();
            } 
            else if (currentQuestionIndex < totalQuestions - 1) {
                currentQuestionIndex++;
                loadQuestion(true); // Animate to next question
            }
        }

        function prevQuestionHandler() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(false); // No animation for previous question
            }
        }
        
        function showCompletionMessage() {
            // Hide quiz elements
            questionContentWrapper.style.display = 'none';
            navigationButtons.style.display = 'none'; 
            
            // Show completion message
            completionMessageElement.style.display = 'block';
            const attempted = score.correct + score.incorrect;
            const accuracy = attempted > 0 ? (score.correct / attempted * 100).toFixed(1) : "0.0";
            
            completionMessageElement.innerHTML = `Quiz Completed!
                <div class="final-score">
                    Final Score: ${score.correct} Correct, ${score.incorrect} Incorrect
                    <br>
                    Accuracy: ${accuracy}%
                </div>`;
            
            // Scroll to top to see message
            quizContainer.scrollIntoView({ behavior: 'smooth' });
            createConfetti(); // Trigger confetti!
        }

        // --- Visual Effects Functions ---

        // 1. Particle Click Effect
        function createParticles(x, y) {
            const colors = ['var(--theme-purple)', 'var(--theme-blue)', 'var(--theme-pink)', 'var(--theme-yellow)', 'var(--theme-cyan)'];
            for (let i = 0; i < 10; i++) { // Increased particle count for more "pop"
                const particle = document.createElement('div');
                particle.style.position = 'fixed';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.width = (Math.random() * 5 + 3) + 'px'; // Random size
                particle.style.height = particle.style.width;
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.borderRadius = '50%';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '9999';
                particle.style.opacity = '1';
                
                document.body.appendChild(particle);
                
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 4 + 2;
                const dx = Math.cos(angle) * velocity;
                const dy = Math.sin(angle) * velocity;
                let opacity = 1;
                
                const animate = (timestamp) => {
                    particle.style.transform = `translate(${dx * (1 - opacity) * 10}px, ${dy * (1 - opacity) * 10}px) scale(${opacity})`;
                    opacity -= 0.03; // Fade faster
                    
                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        particle.remove();
                    }
                };
                requestAnimationFrame(animate);
            }
        }
        
        // 2. Confetti Effect
        function createConfetti() {
            const colors = ['var(--theme-purple)', 'var(--theme-blue)', 'var(--theme-pink)', 'var(--theme-yellow)', 'var(--theme-cyan)'];
            for (let i = 0; i < 100; i++) { // 100 particles for a good celebration
                const particle = document.createElement('div');
                particle.classList.add('confetti-particle');
                particle.style.left = (Math.random() * 100) + 'vw';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.animationDelay = (Math.random() * 2) + 's'; // Stagger the fall
                particle.style.width = (Math.random() * 8 + 5) + 'px';
                particle.style.height = particle.style.width;
                if(i % 2 === 0) {
                    particle.style.borderRadius = '0'; // Make some square
                    particle.style.height = (Math.random() * 5 + 5) + 'px';
                }
                document.body.appendChild(particle);

                // Remove particle after animation ends
                setTimeout(() => {
                    particle.remove();
                }, 3000);
            }
        }


        // --- Event Listeners for Navigation/Interaction ---
        nextButton.addEventListener('click', nextQuestionHandler);
        prevButton.addEventListener('click', prevQuestionHandler);
        
        // Add particle click listener
        document.addEventListener('click', function(e) {
            // Don't trigger on scrollbar
            if (e.clientX < document.documentElement.clientWidth && e.clientY < document.documentElement.clientHeight) {
                createParticles(e.clientX, e.clientY);
            }
        });


        document.addEventListener('keydown', (event) => {
            // Prevent shortcuts while dropdown is focused
            if (document.activeElement === setSelectorElement) return;

            if (event.key.toLowerCase() === 'escape') return; 

            if (completionMessageElement.style.display === 'block') { 
                 event.preventDefault(); 
                 return;
            }

            const key = event.key.toLowerCase();
            if (['a', 'b', 'c', 'd', '1', '2', '3', '4'].includes(key)) {
                event.preventDefault();
                selectOptionByKey(key);
            } else if ((key === 'enter' || key === 'arrowright' || key === ' ') && !nextButton.disabled) { 
                event.preventDefault();
                nextQuestionHandler();
            } else if ((key === '/' || key === 'arrowleft') && !prevButton.disabled) { 
                event.preventDefault();
                prevQuestionHandler();
            }
        });

        // --- Initial setup ---
        populateSetSelector();
        loadQuestion(false); // Load first question without animation
        updateScoreboard(); 
    </script>
</body>
</html>
