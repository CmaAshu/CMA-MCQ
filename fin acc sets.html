<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Accounting Quiz - Select a Set</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }
        .quiz-container {
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px 25px;
            border-radius: 10px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.07);
        }
        h1 {
            text-align: center;
            color: #0056b3; /* Tailwind: text-blue-700 */
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        .set-selection-container {
            margin-bottom: 25px;
            padding: 15px;
            background-color: #e9ecef; /* Tailwind: bg-gray-100 */
            border-radius: 8px;
            text-align: center;
        }
        .set-selection-container h2 {
            margin-bottom: 15px;
            font-size: 1.3em;
            color: #343a40; /* Tailwind: text-gray-800 */
        }
        .set-button {
            background-color: #007bff; /* Tailwind: bg-blue-500 */
            color: white;
            border: none;
            padding: 10px 18px;
            margin: 5px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease-in-out;
        }
        .set-button:hover {
            background-color: #0056b3; /* Tailwind: hover:bg-blue-700 */
        }
        .set-button.active-set {
            background-color: #28a745; /* Tailwind: bg-green-500 */
            font-weight: bold;
        }
        .set-button:disabled {
            background-color: #6c757d; /* Tailwind: bg-gray-500 */
            cursor: not-allowed;
        }

        .live-scoreboard {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            padding: 12px;
            margin-bottom: 25px;
            background-color: #e9ecef; /* Tailwind: bg-gray-100 */
            border-radius: 6px;
            color: #0056b3; /* Tailwind: text-blue-700 */
            border: 1px solid #d1d9e0; /* Tailwind: border-gray-300 */
        }
        .question-block {
            margin-bottom: 28px;
            padding-bottom: 22px;
            border-bottom: 1px dashed #d4dae0; /* Tailwind: border-gray-300 */
        }
        .question-block:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
            color: #2c3e50; /* Tailwind: text-gray-700 */
        }
        .options label {
            display: block;
            margin-bottom: 10px;
            font-size: 1em;
            cursor: pointer;
            padding: 10px 12px;
            border-radius: 6px;
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
            border: 1px solid #e0e0e0; /* Tailwind: border-gray-300 */
            background-color: #f9f9f9; /* Tailwind: bg-gray-50 */
        }
        .options label:hover:not(.disabled-option) {
            background-color: #e9ecef; /* Tailwind: hover:bg-gray-100 */
            border-color: #adb5bd; /* Tailwind: hover:border-gray-400 */
        }
        .options input[type="radio"] {
            margin-right: 12px;
            vertical-align: middle;
            transform: scale(1.1);
        }
        .options input[type="radio"]:disabled + span {
            color: #6c757d; /* Tailwind: text-gray-500 */
        }
        .options label.disabled-option {
            cursor: default;
            background-color: #f0f0f0; /* Tailwind: bg-gray-200 */
            color: #6c757d; /* Tailwind: text-gray-500 */
        }

        .submit-btn {
            display: block;
            width: 100%;
            padding: 14px 20px;
            background-color: #007bff; /* Tailwind: bg-blue-500 */
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.15em;
            font-weight: 500;
            cursor: pointer;
            margin-top: 35px;
            transition: background-color 0.25s, opacity 0.25s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .submit-btn:hover:not(:disabled) {
            background-color: #0056b3; /* Tailwind: hover:bg-blue-700 */
        }
        .submit-btn:disabled {
            background-color: #6c757d; /* Tailwind: bg-gray-500 */
            opacity: 0.7;
            cursor: not-allowed;
        }
        .result-summary {
            margin-top: 30px;
            padding: 20px;
            border-radius: 6px;
            font-size: 1.25em;
            text-align: center;
            font-weight: 600;
        }
        .result-summary.success {
            background-color: #d1e7dd; /* Tailwind: bg-green-100 */
            color: #0f5132; /* Tailwind: text-green-800 */
            border: 1px solid #badbcc; /* Tailwind: border-green-300 */
        }
        .result-summary.error {
            background-color: #f8d7da; /* Tailwind: bg-red-100 */
            color: #842029; /* Tailwind: text-red-800 */
            border: 1px solid #f5c2c7; /* Tailwind: border-red-300 */
        }
        .feedback {
            margin-top: 12px;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.95em;
            display: none; /* Initially hidden */
            border-width: 1px;
            border-style: solid;
        }
        .feedback.correct-answer-text {
            color: #0f5132; /* Tailwind: text-green-800 */
            background-color: #d1e7dd; /* Tailwind: bg-green-100 */
            border-color: #badbcc; /* Tailwind: border-green-300 */
            font-weight: 500;
        }
        .feedback.incorrect-answer-text {
            color: #842029; /* Tailwind: text-red-800 */
            background-color: #f8d7da; /* Tailwind: bg-red-100 */
            border-color: #f5c2c7; /* Tailwind: border-red-300 */
            font-weight: 500;
        }
        .feedback .user-answer-display {
            display: block;
            font-style: italic;
            font-size: 0.9em;
            margin-bottom: 4px;
        }
        .source-note {
            font-size: 0.85em;
            color: #6c757d; /* Tailwind: text-gray-500 */
            text-align: center;
            margin-bottom: 25px;
        }
        #quizArea {
            min-height: 100px; /* Placeholder height before quiz loads */
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .quiz-container { margin: 10px; padding: 15px; }
            h1 { font-size: 1.5em; }
            .set-selection-container h2 { font-size: 1.1em; }
            .set-button { padding: 8px 12px; font-size: 0.9em; }
            .live-scoreboard { font-size: 1em; padding: 10px; }
            .question-text { font-size: 1em; }
            .options label { font-size: 0.95em; padding: 8px 10px; }
            .submit-btn { padding: 12px 15px; font-size: 1.05em; }
            .result-summary { font-size: 1.1em; padding: 15px; }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>Financial Accounting Quiz</h1>

        <div id="setSelectionContainer" class="set-selection-container">
            <h2>Select a Quiz Set</h2>
            </div>

        <div id="quizArea" style="display:none;"> <div id="liveScoreboard" class="live-scoreboard">Score: 0 / 0 | Answered: 0 / 0</div>
            <p class="source-note">All questions and options are sourced from the "Paper6.pdf" document.</p>
            <form id="quizForm">
                </form>
            <button type="button" class="submit-btn" id="submitButton" onclick="submitCurrentQuiz()">Submit Answers</button>
            <div id="resultSummary" class="result-summary" style="display:none;"></div>
        </div>
        <div id="initialMessage" class="text-center p-5 bg-gray-100 rounded-md">
            <p class="text-lg text-gray-700">Please select a quiz set above to begin.</p>
        </div>

    </div>

    <script>
        // Array to hold all question data from paper6.html
        const allQuestionsData = [
            { question: "Which of the following is not a method of charging depreciation?", options: ["Sinking Fund Method", "Sum of years Digit Method", "Working hours Method", "Asset's Life-cycle Method"], correctAnswerCode: 4 },
            { question: "A resource owned by the business with purpose of using it for generating future profit, is known as", options: ["Capital", "Asset", "Liability", "Surplus"], correctAnswerCode: 2 },
            { question: "Outward Invoice issued is a source document of", options: ["Purchase Book", "Sales Book", "Return Inward Book", "Return Outward Book"], correctAnswerCode: 2 },
            { question: "Which of the following is of capital nature?", options: ["Commission on purchases", "Cost of repairs", "Rent of factory", "Wages paid for installation of machinery"], correctAnswerCode: 4 },
            { question: "Which of the following is not a Fundamental Accounting Assumption?", options: ["Going Concern", "Consistency", "Accrual", "Materiality"], correctAnswerCode: 4 },
            { question: "An obligation which may or may not materialize is a/an.", options: ["Loss", "Asset", "Contingent Liability", "None of the above"], correctAnswerCode: 3 },
            { question: "Which of the following is an example of Capital Expenditure?", options: ["Inventory of raw materials, work-in-progress and finished goods", "Insurance premium", "Taxes and legal expenses", "None of the above"], correctAnswerCode: 4 },
            { question: "is specially suited to mines, oil wells, quarries, sandpits and similar assets of a wasting character.", options: ["Depletion", "Depreciation", "Amortisation", "Dilapidation"], correctAnswerCode: 1 },
            { question: "Which of the following account has a credit balance?", options: ["Plant and Equipment A/c", "Loans A/c", "Purchase A/c", "None of the above"], correctAnswerCode: 2 },
            { question: "Which of the following is/are revenue expenditure?", options: ["Consumable Stores", "Taxes and legal expenses", "Rent of factory building", "All of Above"], correctAnswerCode: 4 },
            { question: "Which of the following purpose is served from the preparation of Trial Balance?", options: ["To check the arithmetical accuracy of the recorded transactions", "To ascertain the balance of any ledger account", "To facilitate the preparation of final accounts promptly", "All of the above"], correctAnswerCode: 4 },
            { question: "The basic principles of concept is that business is assumed to exist for an indefinite period", options: ["Going Concern", "Business Entity", "Money Measurement", "None of the above"], correctAnswerCode: 1 },
            { question: "Purchase of a laptop for office use wrongly debited to Purchase Account. It is an error of", options: ["Omission", "Commission", "Principle", "Misposting"], correctAnswerCode: 3 },
            { question: "Which of the following book is both a journal and a ledger?", options: ["Cash Book", "Sales Day Book", "Bills Receivable Book", "Journal Proper"], correctAnswerCode: 1 },
            { question: "Original cost of a machine is ₹1,50,000, residual value ₹10,000, if depreciation is charged @ 10% per annum under WDV method then depreciation for 3rd year will be", options: ["₹12,240", "₹11,340", "₹12,150", "₹14,000"], correctAnswerCode: 3 },
            { question: "Cost of Machine B is ₹90,000, Expenses incurred at the time of purchase to be capitalized is ₹10,000. Estimated Residual Value of Machine B is ₹20,000. Expected Useful Life is 8 years. Compute the amount depreciations under SLM method.", options: ["₹10,000", "₹20,000", "₹15,000", "₹5,000"], correctAnswerCode: 1 },
            { question: "If Capital on 01.01.2023 was ₹24,000. Capital on 31.12.2023 was ₹12,000. Profit /(Loss) during the year was ₹6,000 and Fresh Capital introduced was ₹1,200 Then the amount of drawings was", options: ["₹7,200", "₹12,000", "₹25,200", "₹19,200"], correctAnswerCode: 4 },
            { question: "Journal entry of wages ₹10,000 paid for installation of machinery will be", options: ["Dr.Wages A/c and Cr. Cash A/c with ₹10,000", "Dr.Machinery A/c and Cr. Cash A/c with ₹10,000", "Dr.Machinery repairs A/c and Cr. Cash A/c with ₹10,000", "None of the above"], correctAnswerCode: 2 },
            { question: "Credit balance of a nominal account shows", options: ["Expenses of the business", "Loss in the business", "Income in the business", "Asset of the business"], correctAnswerCode: 3 },
            { question: "Which of the following will be recorded as Contra Entry in a Cash Book?", options: ["₹1,000 withdrawn from bank for personal use", "Cheque of ₹2,000 received from Mr.X lodged into bank on the same day", "Cheque of ₹3,000 received before from Mr.Y and now lodged into bank", "A customer directly deposited ₹4,000 in the bank account of the business"], correctAnswerCode: 3 },
            { question: "Goods purchased costing ₹60,000 and cash paid ₹45,000 after receipt of a cash discount of ₹9,000. What is the percentage of trade discount got?", options: ["15%", "10%", "7.50%", "25%"], correctAnswerCode: 2 },
            { question: "Which of the following errors in an error of omission?", options: ["Sale ₹5,000 written in the purchase journal", "Wages paid to Shyam debited to his account", "The total of the sales journal has not been posted to the sales account", "None of the above"], correctAnswerCode: 3 },
            { question: "A credit sale of goods to Amir, worth ₹600 was recorded in Purchase Book. In the rectification entry", options: ["Amir will be debited by ₹600", "Purchase will be debited by ₹600", "Amir will be debited by ₹1,200", "Sales will be credited by ₹1,200"], correctAnswerCode: 3 },
            { question: "Purchase of machinery worth ₹5,000 was omitted from accounts. The rectification entry is", options: ["Purchase A/c will be debited", "Cash A/c will be credited", "Machinery A/c will be credited", "None of the above"], correctAnswerCode: 4 },
            { question: "Goods purchased from A for ₹2,000 passed through sales book. The rectification of this error results in", options: ["Decrease in Gross Profit", "No effect on Gross Profit", "Increase in Gross Profit", "Increase in Sundry Debtors"], correctAnswerCode: 1 },
            { question: "The Accommodation bill is drawn", options: ["to finance actual purchase or sale of goods.", "to facilitate trade transmission.", "when both parties are in need of funds.", "None of the above"], correctAnswerCode: 3 },
            { question: "If any stock is taken by a co-venturer, it will be treated as", options: ["an income of the joint venture", "an expense of the joint venture", "to be ignored from joint venture", "it will be treated in the personal books of the co-venturer"], correctAnswerCode: 1 },
            { question: "Kuntal draws a bill on shyam for Rs. 7,000. Kuntal endorsed it to Ram. Ram endorsed it to Rahim. The payee of the bill will be:", options: ["Kuntal", "Ram", "Shyam", "Rahim"], correctAnswerCode: 4 },
            { question: "A and B purchased a piece of land for ₹30,000 and sold it for ₹60,000 in 2022. Originally A had contributed ₹12,000 and B ₹8,000. The profit on venture will be", options: ["₹30,000", "₹20,000", "₹60,000", "₹10,000"], correctAnswerCode: 1 },
            { question: "Which of the following is/are the basic features of a Joint Venture", options: ["The profit or loss on joint venture is shared between the co-venturers in the agreed ratio", "The co-venturers may or may not contribute initial capital", "The JV is dissolved once the purpose of the business is over", "All of the above"], correctAnswerCode: 4 },
            { question: "The person to whom bill is endorsed is known as", options: ["Endorsee", "Drawee", "Drawer", "None of the above"], correctAnswerCode: 1 },
            { question: "A and B enter into a joint venture sharing profit and losses in the ratio of 3:2. A purchased goods costing ₹2,00,000. B sold 95% goods for ₹2,50,000. A is entitled to get 1% commission on purchase and B is entitled to get 5% commission on sales. A drew a bill on B for an amount equivalent to 80% of original cost of goods. A got it discounted at ₹1,50,000. What is A's share of profit?", options: ["₹15,300", "₹21,300", "₹18,900", "₹15,000"], correctAnswerCode: 3 },
            { question: "Which of the following commission is allowed by the consignor to the consignee to encourage the consignee for putting-up hard work in introducing new product in the market?", options: ["Del-credere Commission", "Over-riding Commission", "Hard work Commission", "Ordinary Commission"], correctAnswerCode: 2 },
            { question: "X draws a bill on Y for ₹1,80,000 for mutual accommodation in the ratio of 2:1. X got it discounted for ₹1,69,200 and remitted 1/3rd of the proceeds to Y. How much money should be remitted by X to Y at the time of maturity so as to enable Y to honour the bill?", options: ["₹120,000", "₹115,200", "₹116,800", "₹120,400"], correctAnswerCode: 1 },
            { question: "Raju draws a bill on Sampat on 25th October, 2021 for 90 days, the maturity date of the bill will be", options: ["27th January, 2022", "26th January, 2022", "25th January, 2022", "28th January, 2022"], correctAnswerCode: 3 }, // Corrected based on PDF key.
            { question: "Which class of account is Consignment Account?", options: ["Personal Account", "Real Account", "Representative Personal Account", "Nominal Account"], correctAnswerCode: 4 },
            { question: "On dishonor of a bill of exchange that has been discounted, noting charges are initially paid by", options: ["Bank", "Drawer", "Drawee", "Acceptor"], correctAnswerCode: 1 },
            { question: "Miss V draws a genuine trade bill of ₹25,000 for 6 months on Mr. M. After holding the bill for 1.5 months, as a result of unexpected requirement of cash, she immediately discounts the bill with the bank@ 10% p.a. The amount of the discount on bill IS", options: ["₹1,250", "₹2,500", "₹937.50", "₹625"], correctAnswerCode: 3 },
            { question: "On January 01, 2023, Mr. S drew a six months bill on Mr. H for ₹15,000 for mutual accommodation and the bill was duly accepted by Mr. H. Mr. S discounted the bill on the same day with a bank at 10% p.a. and remitted one third proceeds to Mr. H. The discount to be borne by Mr. S is", options: ["₹1,000", "₹500", "₹750", "₹1,250"], correctAnswerCode: 2 },
            { question: "A proforma invoice is sent by", options: ["Consignee to Consignor", "Consignor to Consignee", "Debtors to Consignee", "Debtors Consignor"], correctAnswerCode: 2 },
            { question: "The nature of Consignment A/c and Consignee's A/c will be", options: ["nominal and personal respectively", "real and nominal respectively", "personal and real respectively", "nominal and real respectively"], correctAnswerCode: 1 },
            { question: "K of Kolkata sends out 400 bags of jute to T of Tamilnadu costing ₹200 each. Consignor expenses ₹2,000. Y's non-selling expenses is ₹2,000 and selling expenses is ₹1,000. 300 bags were sold by Y. Value of consignment stock is", options: ["₹20,400", "₹20,200", "₹22,000", "₹21,000"], correctAnswerCode: 4 },
            { question: "Goods will be sent on consignment at invoice price which is 20% above cost. 1/5th of the goods costing ₹60,000 were damaged in transit. Find out invoice price of the goods sent on consignment basis.", options: ["₹375,000", "₹300,000", "₹360,000", "None of these"], correctAnswerCode: 3 },
            { question: "X of Kolkata sends out 100 boxes to Y of Delhi costing ₹200 each. Consignor's expenses: ₹4,000. Consignee's expenses: non-selling ₹900 and selling ₹500. 1/10th of the boxes were lost in transit. 2/3rd of the boxes received by consignee were sold. The amount of consignment stock will be", options: ["₹7,200", "₹7,500", "₹7.000", "₹6.000"], correctAnswerCode: 2 },
            { question: "A sends out goods costing ₹2,00,000 to B. Consignor's expenses ₹5,000. Consignor's expenses in relation to sales ₹3,000. 4/5th of goods were sold at 20% above cost. The profit on consignment will be", options: ["₹25,000", "₹31,000", "₹25.200", "(₹5,000)"], correctAnswerCode: 1 },
            { question: "X of Kolkata send out certain goods at cost + 25%. Invoice value of goods sends out ₹2,00,000. 4/5th of the goods were sold by consignee at ₹1,76,000. Commission 2% upto invoice value & 10% of any surplus above invoice value. Amount of commission is", options: ["₹4,800", "₹5,200", "₹3,200", "₹1,600"], correctAnswerCode: 1 },
            { question: "X of Kolkata send out goods costing ₹1,00,000 to Y of Delhi. 3/5th of the goods were sold by consignee for Rs. 70,000. Commission exceeds cost price. The amount of Commission will be:", options: ["₹2,833", "₹2,900", "₹3,000", "₹2,800"], correctAnswerCode: 1 },
            { question: "Any account sale is the periodical summary statement sent by the to the", options: ["Consignor, Consignee", "Consignee, Consignor", "Buyer, Seller", "Seller, Buyer"], correctAnswerCode: 2 },
            { question: "Account sales", options: ["Have a very particular format", "Does not have a specific format", "Must be prepared by law", "Given by consignor to consignee"], correctAnswerCode: 2 },
            { question: "X sends out good to Y, costing ₹1,50,000 to Y. goods are to be sold at cost +33 1/3%. The consignor asked consignee to pay an advance for an amount equivalent to 60% of sales value. The amount of advance will be:", options: ["₹120.000", "₹100,000", "₹150.000", "None of these"], correctAnswerCode: 1 },
            { question: "Which of these accounts is not a part of double entry system?", options: ["Memorandum A/c", "Joint Bank A/c", "Joint Venture A/c", "Co-venture's A/c"], correctAnswerCode: 1 },
            { question: "A purchased goods costing ₹1,00,000. B sold the goods for ₹1,50,000. Profit sharing ratio between A and B equal. If same sets of books is maintained, what will be the final remittance?", options: ["B will remit ₹1,25,000 to A", "B will remit ₹1,50,000 to A", "A will remit ₹1,00,000 to B", "B will remit ₹25,000 to A"], correctAnswerCode: 1 },
            { question: "A and B entered into a joint venture agreement to share the profits and losses in the ratio of 2:1. A supplied 100 ratio sets worth ₹1,00,000 to B incurring expenses of ₹5,000 for freight and issuance. B sold the 95 ratio sets for ₹1,20,000. 5 radio sets were taken over by B. The profit a/loss on venture will be", options: ["Profit of ₹20,000", "Profit of ₹15,000", "Loss of ₹20,000", "Profit of ₹20.250"], correctAnswerCode: 4 },
            { question: "A purchased goods costing ₹42,500. B sold goods costing ₹40,000 at ₹50,000. Balance goods were taken over by A at ₹4,000. The profit on joint venture is", options: ["₹11,500", "₹7,500", "₹3.500", "Nil"], correctAnswerCode: 1 },
            { question: "A purchased 1000 kg of rice costing ₹200 each. Carriage ₹2,000 insurance ₹3,000. 4/5th of the boxes were sold by B at ₹250 per boxes. Remaining stock were taken over by B at cost. The amount of stock taken over will be", options: ["₹40,000", "₹41,000", "₹50,000", "₹50.200"], correctAnswerCode: 2 },
            { question: "The party who is ordered to pay the amount is known as", options: ["Payee", "Drawer", "Drawee", "Endorsee"], correctAnswerCode: 3 },
            { question: "Retirement of a Bill means", options: ["Discounting a Bill", "Dishonour of a Bill", "Renewal of a Bill", "Payment made before due dates"], correctAnswerCode: 4 },
            { question: "X draws a bill on Y for ₹3000. X endorsed to Z. Y will pay the amount of the bill to:", options: ["X", "Z", "To himself", "None"], correctAnswerCode: 2 },
            { question: "X sold goods to Y for ₹3,00,000. ½ of the amount will be received in cash and the balance through a B/R. For what amount X should draw a bill on Y.", options: ["₹150,000", "₹300,000", "₹100,000", "₹120,000"], correctAnswerCode: 1 },
            { question: "On 1st April, Mr. A sold goods of ₹10,000 to B and drew a bill for 3 months. Mr. A discounted the bill with bank at 15%. Amount of discount will be?", options: ["₹125", "₹250", "₹375", "None of these"], correctAnswerCode: 3 },
            { question: "At the end of the accounting year the capital expenditures are shown in the", options: ["assets side of the Balance Sheet", "liabilities side of the Balance Sheet", "debit side of the Profit and Loss A/c", "credit side of the Profit and Loss A/c"], correctAnswerCode: 1 },
            { question: "If average inventory is ₹1,25,000 and closing inventory is ₹10,000 less than opening inventory then the value of closing inventory will be", options: ["₹135,000", "₹115,000", "₹130,000", "₹120,000"], correctAnswerCode: 4 },
            { question: "As on 31st March, 2023 debtors and additional bad debts are ₹8,00,000 and ₹10,000 respectively. If the provision for bad debts is made at 5% on debtors then amount of such provision will be", options: ["₹40.000", "₹50,000", "₹39,500", "₹40.500"], correctAnswerCode: 3 },
            { question: "Income and Expenditure Account is a", options: ["Nominal Account", "Real Account", "Personal Account", "Artificial Personal Account"], correctAnswerCode: 1 },
            { question: "Receipts and Payments account is a", options: ["Nominal Account", "Real Account", "Personal Account", "Artificial Personal Account"], correctAnswerCode: 2 },
            { question: "Income statement of a Charitable Institution is known as", options: ["Statement of profit and loss", "Receipts and Payments Account", "Income and Expenditure Account", "Profit and Loss Account"], correctAnswerCode: 3 },
            { question: "is similar to the Profit and loss A/c", options: ["Income and Expenditure A/c", "Receipts and Payments A/c", "Balance Sheet", "None of the Above"], correctAnswerCode: 1 },
            { question: "From the following details estimate the capital as on 31.03.2023. Capital as on 01.04.2022-₹4,10,000. Drawings ₹40.000, Profit during the year ₹50,000", options: ["₹410,000", "₹450,000", "₹420.000", "₹410,000"], correctAnswerCode: 3 },
            { question: "Which of the following item does not match with receipts and payments account?", options: ["It is a summarized cash book", "Transactions are recorded in it on cash basis", "It records revenue transactions only", "It serves the purpose of a real account"], correctAnswerCode: 3 },
            { question: "Income & Expenditure A/c shows subscriptions ₹10,000; Subscriptions accrued in the beginning of the year and at the end of the year were ₹1,000 and ₹1,500 respectively. The figure of subscription received appear in receipts and payments account will be:", options: ["₹9,500", "₹10,000", "₹10,500", "₹12,000"], correctAnswerCode: 1 },
            { question: "A Charitable Institution has 250 members with a annual subscription of ₹5,000 each. The subscription received during 2021-22 were ₹11,25,000, which include Rs. 65,000 and ₹25,000 for the years of 2020-21 and 2022-23 respectively. Amount of outstanding subscription for the 2021-22 will be", options: ["₹90.000", "₹125.000", "₹215,000", "₹190,000"], correctAnswerCode: 3 },
            { question: "Opening Debtors, Collection from Debtors and Discount Allowed were ₹3,15,000; ₹18,30,000 and ₹35,000 respectively. If the closing debtors were 20% of credit sales of the period then closing debtors and credit sales would be", options: ["₹3,51,667 and ₹17,58,333", "₹3,63.333 and ₹18,16,667", "₹3,87,500 and ₹19,37,500", "₹3,10,000 and ₹15,50,000"], correctAnswerCode: 3 },
            { question: "In case of a Club, the excess of expenditure over income is called as", options: ["Surplus", "Deficit", "Capital Fund", "Investment in Fixed Assets"], correctAnswerCode: 2 },
            { question: "Opening Inventory ₹9,600, Purchases less Return ₹11,850, Salaries ₹3,200, Wages Rs.750, Commission on Purchases ₹200, Carriage Outward ₹300, Sales ₹24,900, Closing Inventory ₹3,500, Carriage on purchases ₹1,000. Compute Gross Profit.", options: ["₹5,000", "₹6,500", "₹3,250", "₹3,200"], correctAnswerCode: 1 },
            { question: "Find out Gross profit/Loss :- Purchase ₹30,000, Sales ₹15,000, Carriage Inward ₹2,400, Opening stock ₹10,000, Purchase Returns ₹1,000,Closing stock ₹36,000", options: ["₹20,000", "₹10,000", "₹9,600", "₹10,600"], correctAnswerCode: 3 },
            { question: "Opening Stock ₹1,50,000, Cash Sales ₹1,20,000,Credit Sales ₹2,30,000, Closing Stock is Nil. Selling Price is 125% on Cost. Compute Purchases.", options: ["₹150,000", "₹140,000", "₹130.000", "₹120,000"], correctAnswerCode: 3 },
            { question: "Opening and Closing balance of Debtors are ₹30,000 and ₹40,000 respectively. Cash collected from debtors ₹2,40,000. Discount allowed is ₹15,000 for prompt payment. Bad Debts ₹10,000. The total goods sold on credit are", options: ["₹255,000", "₹245,000", "₹295.000", "₹275,000"], correctAnswerCode: 4 },
            { question: "If a trader's net sales amount to ₹18,000 and his gross profit is 60% of sales and his net profit is 40% of sales, his expenses are", options: ["₹10,780", "₹7.200", "₹3,600", "₹1,800"], correctAnswerCode: 3 },
            { question: "A firm had a Capital Balance of ₹1,00,000 at the beginning of a year. At the end of the year, the firm has total assets of ₹1,50,000 and total liabilities of ₹70,000. If the total withdrawals during the period were ₹30,000, what was the amount of net profit/net loss for the year?", options: ["₹10,000 profit", "₹20,000 loss", "₹50,000 loss", "₹10,000 loss"], correctAnswerCode: 1 },
            { question: "Which of the following is fixed asset?", options: ["Plant and machinery", "Stock", "Debtors", "Cash"], correctAnswerCode: 1 },
            { question: "A Trial balance as at 31st December contains the following information: 12% Bank loan ₹50,000, Interest paid ₹3,800, Interest debited to the Profit and Loss Account is:", options: ["₹6,000", "₹2,200", "₹9,800", "₹4.800"], correctAnswerCode: 1 },
            { question: "The closing capital of Mr. X as on 31.03.2023 was ₹4,00,000.On 01.04.2022 his capital was Rs. ₹3,50,000. His net profit for the year ended 31.03.2023 was ₹1,00,000. He introduced ₹30,000 as additional capital in February, 2023. Find out th amount drawn by Mr.B for his personal expenses?", options: ["₹100,000", "₹80,000", "₹120.000", "₹150,000"], correctAnswerCode: 2 },
            { question: "In case of a Club, the excess of expenditure over income is called as", options: ["Surplus", "Deficit", "Capital Fund", "Investment in Fixed Assets"], correctAnswerCode: 2 },
            { question: "Donation received for a specific purpose is a/an", options: ["Asset", "liabilities", "Revenue Receipts", "Capital Receipts"], correctAnswerCode: 4 },
            { question: "Which of the following account is mainly prepared at the time of dissolution of the firm", options: ["Revaluation A/c", "Goodwill A/c", "Realization A/c", "Memorandum Revaluation A/c"], correctAnswerCode: 3 },
            { question: "X and Y are partners with the capital of ₹50,000 and ₹30,000 respectively. Interest Payable on Capital is 10% p.a. If the profits earned by the firm is ₹4,800, what will be the Interest on Capital for X and Y?", options: ["₹5,000 and ₹3,000", "₹3,000 and ₹1,800", "No interest will be paid to the partners", "None of the above"], correctAnswerCode: 2 },
            { question: "X, Y and Z are partners in the ratio of 3: 2:1. W is admitted with 1/6 th share in future profits. Z would retain his original shares. Find out the new profit sharing ratios of the partners.", options: ["3:2:1:6", "12:8:5:5", "3:2:1:1", "5:5:8:12"], correctAnswerCode: 2 },
            { question: "A and B are currently partners in a firm sharing Profit/Loss in the ratio of 4: 3. A new partner C is admitted and after his admission new profit sharing ratio between A, B and C becomes 5: 3:2. What will be the sacrifice ratio of A and B after admission of C?", options: ["5:09", "5:03", "5:04", "5:01"], correctAnswerCode: 1 },
            { question: "The share of Profits or Losses of Partners in absence of oral or written agreement will be", options: ["Equal", "In the ratio of their capital", "Agreed Ratio", "None of the above"], correctAnswerCode: 1 },
            { question: "In absence of specific provision in the Partnership deed at what rate of interest on Capital of the Partners would be allowed?", options: ["8%", "10%", "6%", "11%"], correctAnswerCode: 3 },
            { question: "Average Profit =₹3,72,000 Normal rate of return=12% Total Assets =₹68.00.000 Outside liabilities =₹42,00,000 Calculate the value of goodwill under capitalization method.", options: ["₹500,000", "₹600,000", "₹700,000", "₹800,000"], correctAnswerCode: 1 },
            { question: "The Profits of last 3 years are ₹42,000, ₹39,000 and ₹45,000. Find out the Goodwill of 2 years purchase.", options: ["₹42,000", "₹84,000", "₹126,000", "₹36,000"], correctAnswerCode: 2 },
            { question: "Excess of average profit earned by the Firm over and above its normal profit -", options: ["Total Profit", "Super Profit", "Normal returns", "Excess Profit"], correctAnswerCode: 2 },
            { question: "Which of the following should be valued compulsory at the time of admission of a partner", options: ["Goodwill", "Plant & Machinery", "Land & Building", "Furniture & Fittings"], correctAnswerCode: 1 },
            { question: "X and Y share profits and losses in the ratio of 4:3. They admit Z in the Firm with 3/7th share which he gets 2/7th from X and 1/7th from Y. the new profit sharing ratio will be -", options: ["7:3:3", "2:2:3", "5:2:3", "2:3:3"], correctAnswerCode: 2 },
            { question: "A,B,C and D are partners sharing their profits and losses equally. They change their profit sharing to 2:2:1:1. How much will C sacrifice?", options: ["1/6", "1/12", "1/24", "1/2"], correctAnswerCode: 2 },
            { question: "X and Y are partners in a Firm with Capital of ₹18,000 and ₹20,000. Z was admitted for 1/3rd share in profits and brings ₹24,000 as Capital, calculate the amount goodwill:", options: ["₹24,000", "₹20,000", "₹15,000", "₹10,000"], correctAnswerCode: 4 },
            { question: "A, B and C are Partners sharing profits equally. A retires and Goodwill appearing in the books at ₹3,000 is valued at ₹6,000. A will get credit of-", options: ["₹2,000", "₹3,000", "₹500", "₹1,000"], correctAnswerCode: 4 }, // Corrected based on PDF key.
            { question: "A, B and C are Partners with Capitals of ₹1,00,000, ₹75,000 and ₹50,000. On C's retirement his share is acquired by A and B in the ratio of 6:4 respectively. Calculate gaining ratio.", options: ["3:2", "2:2", "2:3", "None of these"], correctAnswerCode: 1 },
            { question: "A, B and C are partners sharing profits in the ratio of 2;2:1, on retirement of B, goodwill was valued as Rs.30,000. Find the contribution of A and C to compensate B.", options: ["Rs.20,000 and Rs.10,000", "Rs.8,000 and Rs.4,000", "Rs. 15,000 and Rs. 15,00", "No contribution"], correctAnswerCode: 2 },
            { question: "A, B and C are partners sharing profits and losses in the ratio 2:2:1. C died on 31st March 2022. The profits of the financial year ending 31st March 2022 is ₹64,000. The share of Deceased partner in the profits will be -", options: ["₹9.200", "₹12,800", "₹3,100", "₹6,100"], correctAnswerCode: 2 },
            { question: "When goodwill is withdrawn by the partners account is credited.", options: ["Cash", "Partners Capital A/c", "Partners Loan A/c", "Goodwill A/c"], correctAnswerCode: 1 },
            { question: "When Goodwill is to be written off after admission of a partner in which ratio it is transferred to Capital A/c of the Partners?", options: ["Sacrificing Ratio", "Equally", "New Profit Sharing Ratio", "Old Profit Sharing Ratio"], correctAnswerCode: 3 },
            { question: "Section 32 of the Indian Partnership Act, 1932 a partner may retire", options: ["With the consent of all the existing partners", "In accordance with an express agreement by the partners", "By giving a written notice to all other partners of his intention to retire in case of 'Partnership at Will", "All of the above"], correctAnswerCode: 4 },
            { question: "Advertisement expenses are apportioned among departments in the proportion of", options: ["sales of each department", "purchases of each department", "no. of units sold by each department", "cost of sales of each department"], correctAnswerCode: 1 },
            { question: "Which one is/are the method/s of Accounting for Branches ?", options: ["Final Accounts Method", "Debtors Method", "Stock and Debtors Method", "All of the above"], correctAnswerCode: 4 },
            { question: "Bad debts are apportioned among departments in the proportion of", options: ["Sales of each department", "Number of units sold by each department", "Cost of sales of each department", "None of the above"], correctAnswerCode: 1 },
            { question: "Goods are transferred from Department X to Department Y at a price so as to include a profit of 33.33% on cost. If the value of closing stock of Department Y is ₹48,000, then the amount of stock reserve on closing stock will be", options: ["₹12,000", "₹9,000", "₹18,000", "₹16,000"], correctAnswerCode: 1 },
            { question: "Goods are sent to the Branch at cost plus 25%. The loading on invoice price is", options: ["20%", "25%", "30%", "50%"], correctAnswerCode: 1 },
            { question: "In Hire Purchase system cash price plus interest is known as", options: ["Capital value of asset", "Book value of asset", "Hire purchase price of asset", "Hire purchase charges"], correctAnswerCode: 3 },
            { question: "Excess of hire purchase price over cash price is known as", options: ["Installment", "Cash down payment", "Interest", "Capital value of asset"], correctAnswerCode: 3 },
            { question: "KCS purchased a machine from JPS on hire purchase system, whose cash price was ₹8,64,000.₹2,16,000 being paid on delivery and balance in three annual instalments of ₹2,88,000 each. The amount of interest included in first installment would be", options: ["₹72,000", "₹57,600", "₹108,000", "₹36,000"], correctAnswerCode: 3 },
            { question: "Head office invoiced goods to its branch at 10% less than the catalogue price which is cost plus 20%. If the total invoiced goods during the year is ₹4,32,000, then the cost of such goods IS", options: ["₹400,000", "₹388,800", "₹345.600", "₹518,400"], correctAnswerCode: 1 },
            { question: "Goods are sent to branch at cost plus 50%. The loading on the invoice price is", options: ["50%", "33.33%", "25%", "20%."], correctAnswerCode: 2 },
            { question: "The head office of a company sends goods to its branch at 150% of its cost price. If the value of goods received by branch is ₹7,50,000, then the cost of goods will be", options: ["₹600,000", "₹400,000", "₹625,000", "₹500,000"], correctAnswerCode: 4 },
            { question: "Goods costing ₹2,00,000 wew insured for ₹1,00,000. out of which 3/4th were destroyed by fire. Calculate the amount of claim with average clause.", options: ["₹75,000", "₹100,000", "₹150,000", "₹200,000"], correctAnswerCode: 1 },
            { question: "A plant worth ₹80,000 has been insured for ₹60,000, the loss on account of fire is ₹50,000. The insurance company will bear the loss to the extent of", options: ["₹37,500", "₹50,000", "₹60,000", "₹80,000"], correctAnswerCode: 1 },
            { question: "Standard turnover is", options: ["Turnover during last 12 months immediately before the damage", "Turnover during that period of 12 months immediately before which corresponds with indemnity period.", "Unavoidable fixed expenses which have to be paid even if there is reduction in sale", "Turnover of the last accounting period immediately before damage."], correctAnswerCode: 2 },
            { question: "Departmental accounting helps in", options: ["Evaluation of trading results of each department separately", "Effective planning and control on each department", "Both 1 and 2", "None of the above"], correctAnswerCode: 3 },
            { question: "If Department M transfers goods to Department N at a price of 50% above cost, what well be the amount of stock reserve on unsold stock worth ₹9,000 of Department N?", options: ["₹3.000", "₹4,500", "₹1,500", "₹2.500"], correctAnswerCode: 1 },
            { question: "The hire purchaser records the assets at its", options: ["Hire purchase price", "Amount paid to the vendor till date", "Cash price", "Total cost"], correctAnswerCode: 3 },
            { question: "Depreciation on hire purchased asset is claimed by", options: ["Hire vendor", "Hire purchaser", "Either the hire vendor or the hire purchaser, as per theagreement", "None of these"], correctAnswerCode: 2 },
            { question: "While treating the abnormal loss under Stock and Debtors system of maintaining Branch accounts, loading on abnormal loss is transferred to", options: ["Branch Stock Account", "Branch Debtors Account", "Branch Stock Adjustment Account", "Branch Profit and Loss Account"], correctAnswerCode: 3 },
            { question: "Under Debtors System of maintaining branch accounts, which of the following appears in Branch Account?", options: ["Credit purchase", "Goods returned by debtors to branch", "Goods returned by debtors to H.O", "Goods sent to branch"], correctAnswerCode: 4 },
            { question: "Branches not keeping full system of accounting are called", options: ["Independent branches", "Partial branches", "Dependent branches", "None of these"], correctAnswerCode: 3 },
            { question: "Assets are generally repossessed at a mutual agreed", options: ["value", "current price", "Installments due", "None of these"], correctAnswerCode: 1 },
            { question: "CP Points sells Computers on Hire Purchase basis at cost plus 25%. Terms of sale are ₹10,000 down payment and eight monthly instalments of ₹5,000 each for each computer. Compute the HP Price per computer.", options: ["₹50,000", "₹40,000", "₹20,000", "₹10,000"], correctAnswerCode: 1 },
            { question: "On 1st April 2022, a car company sold to A Bros, a Motorcar on Hire Purchase basis. Total Hire Purchase Price was ₹4,60,000 with down payment of ₹1,60,000. Balance amount was to be paid in three Annual Instalments of ₹1,00,000 each. The first instalment payble on 31st March, 2023. Cash Price was ₹4,00,000. compute the interest of second year.", options: ["₹30,000", "₹20,000", "₹10,000", "₹60,000"], correctAnswerCode: 2 },
            { question: "In January, a Firm took an insurance policy for ₹60 lakhs to insure goods in its godown against fire, subject to Average Clause.on 7th March, a Fire broke out destroying goods costing ₹44 lakhs. Stock in godown was estimated at ₹80 lakhs. Compute the amount of Insurance Claim.", options: ["₹6,000,000", "₹4,400,000", "₹3,300,000", "₹8,000,000"], correctAnswerCode: 3 },
            { question: "Accounting standard in India are issued by", options: ["Government of India", "Reserve Bank of India", "The Institute of Chartered Accountants of India", "The Institute of Accounting Standard of India"], correctAnswerCode: 3 },
            { question: "As per AS 10 \"Property, Plant and Equipment', an enterprise holding investment properties should value Investment Property", options: ["As per fail value", "applying discounted cash flow model", "using cost model", "None of the above"], correctAnswerCode: 3 },
            { question: "As per AS 16 all of the following are qualifying assets except", options: ["Manufacturing plants and power generation facilities", "Inventories that require substantial period of time", "Assets those are ready for sale", "None of the above"], correctAnswerCode: 3 },
            { question: "All of the following costs are excluded while computing value of inventories except", options: ["Selling and distribution costs", "Allocated fixed production overheads based on normal capacity", "Abnormal wastage", "All of the above"], correctAnswerCode: 2 },
            { question: "Which of the following is not a fundamental accounting assumption?", options: ["Consistancy", "Materiality", "Going Concern", "Accrual"], correctAnswerCode: 2 },
            { question: "As per AS 1, where a company should disclose its accounting policies?", options: ["In the Annual Report", "In the Auditor's Report", "In the CEO's letter to the shareholders", "In the notes to Financial Statement"], correctAnswerCode: 4 },
            { question: "Full form of IFRS", options: ["Indian Financial Reporting Standards", "International Financial Reporting Standards", "International Financials Reporting Standards", "Indian Financial Reporting Standard"], correctAnswerCode: 2 },
            { question: "Areas involving different accounting policies by different enterprises is/are", options: ["Valuation of inventories", "Treatment of intangible assets", "Recognition of profit on long-term contracts", "All of these"], correctAnswerCode: 4 },
            { question: "An entity has acquired an Asset costing ₹1,00,000 for production of certain items to be sold by it. It is deductible equally over 2 years in the books of accounts. In Tax Law, ₹75,000 is deductible in year 1 and balance is deductible in year 2. Tax rate is 10%. In year 2, The entity should", options: ["Create DTL ₹2,500", "Reverse DTL ₹2.500", "Create DTA ₹2.500", "Reverse DTA ₹2.500"], correctAnswerCode: 2 },
            { question: "As per AS 22 an example of permanent difference is", options: ["Exempt Income", "Disallowed Expenses", "Enhanced Deduction", "All of these"], correctAnswerCode: 4 },
            { question: "Borrowing cost includes", options: ["Debenture Interest", "Preference Dividend", "Equity Dividend", "All of these"], correctAnswerCode: 1 },
            { question: "Grants which are in the nature of Promoter's Contribution is accounted under", options: ["Capital Approach", "Income Approach", "Any of 1 and 2", "None of these"], correctAnswerCode: 1 },
            { question: "₹10 lakhs Grant received for assets (life 10 years). Income credited to Profit and Loss A/c every year under Deferred Income Method is", options: ["₹1 lakhs", "Depends on the Depreciation Method used", "₹10 Lakhs", "Nil"], correctAnswerCode: 1 },
            { question: "According to AS 11 (Revised) the difference between the forward rate and the exchange rate at the date of transaction should be", options: ["Ignored", "Recognised as income or expense", "Adjusted to Shareholders' interests", "None of these"], correctAnswerCode: 2 },
            { question: "As per AS 11 Monetory Items excludes", options: ["Cash", "Receivables", "Payables", "Inventories"], correctAnswerCode: 4 }
        ];


        let currentScore = 0;
        let questionsAnswered = 0;
        let currentQuestionSet = []; // Holds questions for the currently selected set
        let totalQuestionsInCurrentSet = 0; // Total questions in the currently selected set
        
        // Calculate questions per set. 144 total questions.
        // Sets 1-4: 29 questions. Set 5: 28 questions.
        const questionsPerSetArray = [29, 29, 29, 29, 28];
        const totalSets = questionsPerSetArray.length;


        /**
         * Sanitizes HTML string by replacing < and > characters.
         */
        function sanitizeHTML(str) {
            if (typeof str !== 'string') return '';
            return str.replace(/</g, "&lt;").replace(/>/g, "&gt;");
        }

        /**
         * Creates the set selection buttons.
         */
        function createSetSelectionControls() {
            const container = document.getElementById('setSelectionContainer');
            if (!container) return;

            const buttonsDivId = 'set-buttons-wrapper';
            let buttonsDiv = container.querySelector(`#${buttonsDivId}`);
            if (!buttonsDiv) {
                buttonsDiv = document.createElement('div');
                buttonsDiv.id = buttonsDivId;
                container.appendChild(buttonsDiv);
            }
            buttonsDiv.innerHTML = ''; // Clear previous buttons

            if (allQuestionsData.length > 0) {
                for (let i = 0; i < totalSets; i++) {
                    const button = document.createElement('button');
                    button.textContent = `Set ${i + 1} (${questionsPerSetArray[i]} Qs)`;
                    button.classList.add('set-button');
                    button.onclick = function() { loadQuestionSet(i); };
                    buttonsDiv.appendChild(button);
                }
            } else {
                 buttonsDiv.innerHTML = '<p class="text-red-500">No questions loaded to create sets.</p>';
            }
        }

        /**
         * Loads and displays a specific set of questions.
         * @param {number} setIndex - The 0-based index of the set to load.
         */
        function loadQuestionSet(setIndex) { // setIndex is 0-based
            const quizArea = document.getElementById('quizArea');
            const initialMessage = document.getElementById('initialMessage');
            if (!quizArea || !initialMessage) return;

            let startIndex = 0;
            for(let i = 0; i < setIndex; i++) {
                startIndex += questionsPerSetArray[i];
            }
            const questionsInThisSet = questionsPerSetArray[setIndex];
            const endIndex = startIndex + questionsInThisSet;

            currentQuestionSet = allQuestionsData.slice(startIndex, endIndex);
            totalQuestionsInCurrentSet = currentQuestionSet.length; 

            if (totalQuestionsInCurrentSet === 0) {
                console.warn(`Attempted to load Set ${setIndex + 1}, but it has no questions. Check 'allQuestionsData'.`);
                document.getElementById('quizForm').innerHTML = '<p class="text-center text-red-600">This question set is empty or could not be loaded.</p>';
                updateLiveScoreboard();
                quizArea.style.display = 'block';
                initialMessage.style.display = 'none';
                return;
            }

            currentScore = 0;
            questionsAnswered = 0;
            
            buildQuizDisplay(currentQuestionSet);
            updateLiveScoreboard();

            const resultSummaryDiv = document.getElementById('resultSummary');
            if (resultSummaryDiv) {
                resultSummaryDiv.style.display = 'none';
                resultSummaryDiv.textContent = '';
            }
            const submitButton = document.getElementById('submitButton');
            if (submitButton) {
                submitButton.disabled = false;
                submitButton.textContent = "Submit Answers";
            }

            quizArea.style.display = 'block';
            initialMessage.style.display = 'none';

            const setButtons = document.querySelectorAll('.set-button');
            setButtons.forEach((btn, idx) => {
                btn.classList.toggle('active-set', idx === setIndex);
            });
        }

        /**
         * Builds the quiz HTML structure for the given questions and injects it into the form.
         * @param {Array} questionsToDisplay - The array of question objects for the current set.
         */
        function buildQuizDisplay(questionsToDisplay) {
            const quizForm = document.getElementById('quizForm');
            if (!quizForm) {
                console.error("Quiz form element not found!");
                return;
            }
            let html = '';
            questionsToDisplay.forEach((q, indexInSet) => { 
                html += `<div class="question-block" id="question-${indexInSet}">`;
                html += `   <p class="question-text">${indexInSet + 1}. ${sanitizeHTML(q.question)}</p>`;
                html += `   <div class="options">`;
                q.options.forEach((option, i) => {
                    const optionValue = i + 1;
                    html += `       <label for="q${indexInSet}_option${optionValue}">`;
                    html += `           <input type="radio" name="q${indexInSet}" id="q${indexInSet}_option${optionValue}" value="${optionValue}" onchange="checkAnswer(${indexInSet})">`;
                    html += `           <span>${sanitizeHTML(option)}</span>`;
                    html += `       </label>`;
                });
                html += `   </div>`;
                html += `   <div class="feedback" id="feedback-${indexInSet}"></div>`;
                html += `</div>`;
            });
            quizForm.innerHTML = html;
        }

        /**
         * Updates the live scoreboard display.
         */
        function updateLiveScoreboard() {
            const scoreboard = document.getElementById('liveScoreboard');
            if (scoreboard) {
                scoreboard.textContent = `Score: ${currentScore} / ${totalQuestionsInCurrentSet} | Answered: ${questionsAnswered} / ${totalQuestionsInCurrentSet}`;
            }
        }

        /**
         * Checks the answer for a given question in the current set, provides feedback, and updates the score.
         * @param {number} questionIndexInSet - The index of the question in currentQuestionSet.
         */
        function checkAnswer(questionIndexInSet) {
            const questionData = currentQuestionSet[questionIndexInSet];
            const form = document.getElementById('quizForm');
            const feedbackDiv = document.getElementById(`feedback-${questionIndexInSet}`);
            const radioButtons = form.elements[`q${questionIndexInSet}`];
            
            if (!questionData || !form || !feedbackDiv || !radioButtons) {
                console.error(`Elements for question ${questionIndexInSet} in current set not found.`);
                return;
            }

            if (radioButtons[0] && radioButtons[0].disabled) {
                return; 
            }

            let selectedOptionValue = null;
            for (let i = 0; i < radioButtons.length; i++) {
                if (radioButtons[i].checked) {
                    selectedOptionValue = radioButtons[i].value;
                }
                radioButtons[i].disabled = true;
                if (radioButtons[i].parentElement && radioButtons[i].parentElement.tagName === 'LABEL') {
                    radioButtons[i].parentElement.classList.add('disabled-option');
                }
            }

            if (selectedOptionValue === null) return;

            questionsAnswered++;

            const correctAnswerCode = questionData.correctAnswerCode;
            const correctAnswerText = (correctAnswerCode > 0 && questionData.options && correctAnswerCode <= questionData.options.length)
                                      ? sanitizeHTML(questionData.options[correctAnswerCode - 1])
                                      : "N/A";

            feedbackDiv.className = 'feedback'; 
            if (selectedOptionValue == correctAnswerCode) {
                currentScore++;
                feedbackDiv.innerHTML = `Correct! The answer is: ${correctAnswerText}`;
                feedbackDiv.classList.add('correct-answer-text');
            } else {
                const userAnswerText = (questionData.options && parseInt(selectedOptionValue) > 0 && parseInt(selectedOptionValue) <= questionData.options.length)
                                       ? sanitizeHTML(questionData.options[parseInt(selectedOptionValue) - 1])
                                       : "N/A";
                feedbackDiv.innerHTML = `<span class="user-answer-display">Your answer: ${userAnswerText}</span>Incorrect. The correct answer is: ${correctAnswerText}`;
                feedbackDiv.classList.add('incorrect-answer-text');
            }
            feedbackDiv.style.display = 'block';
            updateLiveScoreboard();
        }
        
        /**
         * Displays the final score summary for the current set.
         */
        function submitCurrentQuiz() {
            const resultSummaryDiv = document.getElementById('resultSummary');
            if (!resultSummaryDiv) {
                console.error("Result summary element not found!");
                return;
            }

            if (questionsAnswered < totalQuestionsInCurrentSet) {
                const unAnsweredCount = totalQuestionsInCurrentSet - questionsAnswered;
                resultSummaryDiv.innerHTML = `Please answer all ${totalQuestionsInCurrentSet} questions. You have ${unAnsweredCount} unanswered.`;
                resultSummaryDiv.className = 'result-summary error';
                resultSummaryDiv.style.display = 'block';
                resultSummaryDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
                return;
            }

            resultSummaryDiv.innerHTML = `Quiz Set Complete! Your final score is ${currentScore} out of ${totalQuestionsInCurrentSet}.`;
            resultSummaryDiv.className = 'result-summary ' + (currentScore >= totalQuestionsInCurrentSet / 2 ? 'success' : 'error');
            resultSummaryDiv.style.display = 'block';
            resultSummaryDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });

            const submitButton = document.getElementById('submitButton');
            if (submitButton) {
                submitButton.disabled = true;
                submitButton.textContent = "Quiz Submitted";
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            if (allQuestionsData.length === 0) {
                console.error("CRITICAL: No questions found in 'allQuestionsData'. Quiz cannot be initialized.");
            }
            createSetSelectionControls();
        });
    </script>
</body>
</html>
